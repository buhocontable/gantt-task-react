{"version":3,"file":"index.modern.js","sources":["../src/types/public-types.ts","../src/helpers/date-helper.ts","../src/components/task-list/task-list-header.tsx","../src/components/task-list/task-list-table.tsx","../src/components/other/tooltip.tsx","../src/components/other/vertical-scroll.tsx","../src/components/task-list/task-list.tsx","../src/components/grid/grid-body.tsx","../src/components/grid/grid.tsx","../src/components/calendar/top-part-of-calendar.tsx","../src/components/calendar/calendar.tsx","../src/components/other/arrow.tsx","../src/helpers/bar-helper.ts","../src/helpers/other-helper.ts","../src/components/task-item/bar/bar-display.tsx","../src/components/task-item/bar/bar-date-handle.tsx","../src/components/task-item/bar/bar-progress-handle.tsx","../src/components/task-item/bar/bar.tsx","../src/components/task-item/bar/bar-small.tsx","../src/components/task-item/milestone/milestone.tsx","../src/components/task-item/project/project.tsx","../src/components/task-item/task-item.tsx","../src/components/gantt/task-gantt-content.tsx","../src/components/gantt/task-gantt.tsx","../src/components/other/horizontal-scroll.tsx","../src/components/gantt/gantt.tsx"],"sourcesContent":["export enum ViewMode {\n  Hour = \"Hour\",\n  QuarterDay = \"Quarter Day\",\n  HalfDay = \"Half Day\",\n  Day = \"Day\",\n  /** ISO-8601 week */\n  Week = \"Week\",\n  Month = \"Month\",\n  QuarterYear = \"QuarterYear\",\n  Year = \"Year\",\n}\nexport type TaskType = \"task\" | \"milestone\" | \"project\";\nexport interface Task {\n  id: string;\n  type: TaskType;\n  name: string;\n  start: Date;\n  end: Date;\n  /**\n   * From 0 to 100\n   */\n  progress: number;\n  styles?: {\n    backgroundColor?: string;\n    backgroundSelectedColor?: string;\n    progressColor?: string;\n    progressSelectedColor?: string;\n  };\n  isDisabled?: boolean;\n  project?: string;\n  dependencies?: string[];\n  hideChildren?: boolean;\n  displayOrder?: number;\n}\n\nexport interface EventOption {\n  /**\n   * Time step value for date changes.\n   */\n  timeStep?: number;\n  /**\n   * Invokes on bar select on unselect.\n   */\n  onSelect?: (task: Task, isSelected: boolean) => void;\n  /**\n   * Invokes on bar double click.\n   */\n  onDoubleClick?: (task: Task) => void;\n  /**\n   * Invokes on bar click.\n   */\n  onClick?: (task: Task) => void;\n  /**\n   * Invokes on end and start time change. Chart undoes operation if method return false or error.\n   */\n  onDateChange?: (\n    task: Task,\n    children: Task[]\n  ) => void | boolean | Promise<void> | Promise<boolean>;\n  /**\n   * Invokes on progress change. Chart undoes operation if method return false or error.\n   */\n  onProgressChange?: (\n    task: Task,\n    children: Task[]\n  ) => void | boolean | Promise<void> | Promise<boolean>;\n  /**\n   * Invokes on delete selected task. Chart undoes operation if method return false or error.\n   */\n  onDelete?: (task: Task) => void | boolean | Promise<void> | Promise<boolean>;\n  /**\n   * Invokes on expander on task list\n   */\n  onExpanderClick?: (task: Task) => void;\n}\n\nexport interface DisplayOption {\n  viewMode?: ViewMode;\n  viewDate?: Date;\n  preStepsCount?: number;\n  /**\n   * Specifies the month name language. Able formats: ISO 639-2, Java Locale\n   */\n  locale?: string;\n  rtl?: boolean;\n}\n\nexport interface StylingOption {\n  headerHeight?: number;\n  columnWidth?: number;\n  listCellWidth?: string;\n  rowHeight?: number;\n  ganttHeight?: number;\n  ganttWidth?: number;\n  barCornerRadius?: number;\n  handleWidth?: number;\n  fontFamily?: string;\n  fontSize?: string;\n  /**\n   * How many of row width can be taken by task.\n   * From 0 to 100\n   */\n  barFill?: number;\n  barProgressColor?: string;\n  barProgressSelectedColor?: string;\n  barBackgroundColor?: string;\n  barBackgroundSelectedColor?: string;\n  projectProgressColor?: string;\n  projectProgressSelectedColor?: string;\n  projectBackgroundColor?: string;\n  projectBackgroundSelectedColor?: string;\n  milestoneBackgroundColor?: string;\n  milestoneBackgroundSelectedColor?: string;\n  arrowColor?: string;\n  arrowIndent?: number;\n  todayColor?: string;\n  TooltipContent?: React.FC<{\n    task: Task;\n    fontSize: string;\n    fontFamily: string;\n  }>;\n  TaskListHeader?: React.FC<{\n    headerHeight: number;\n    rowWidth: string;\n    fontFamily: string;\n    fontSize: string;\n  }>;\n  TaskListTable?: React.FC<{\n    rowHeight: number;\n    rowWidth: string;\n    fontFamily: string;\n    fontSize: string;\n    locale: string;\n    tasks: Task[];\n    selectedTaskId: string;\n    /**\n     * Sets selected task by id\n     */\n    setSelectedTask: (taskId: string) => void;\n    onExpanderClick: (task: Task) => void;\n  }>;\n}\n\nexport interface GanttProps extends EventOption, DisplayOption, StylingOption {\n  tasks: Task[];\n}\n","import { Task, ViewMode } from \"../types/public-types\";\nimport DateTimeFormatOptions = Intl.DateTimeFormatOptions;\nimport DateTimeFormat = Intl.DateTimeFormat;\n\ntype DateHelperScales =\n  | \"year\"\n  | \"month\"\n  | \"day\"\n  | \"hour\"\n  | \"minute\"\n  | \"second\"\n  | \"millisecond\";\n\nconst intlDTCache = {};\nexport const getCachedDateTimeFormat = (\n  locString: string | string[],\n  opts: DateTimeFormatOptions = {}\n): DateTimeFormat => {\n  const key = JSON.stringify([locString, opts]);\n  let dtf = intlDTCache[key];\n  if (!dtf) {\n    dtf = new Intl.DateTimeFormat(locString, opts);\n    intlDTCache[key] = dtf;\n  }\n  return dtf;\n};\n\nexport const addToDate = (\n  date: Date,\n  quantity: number,\n  scale: DateHelperScales\n) => {\n  const newDate = new Date(\n    date.getFullYear() + (scale === \"year\" ? quantity : 0),\n    date.getMonth() + (scale === \"month\" ? quantity : 0),\n    date.getDate() + (scale === \"day\" ? quantity : 0),\n    date.getHours() + (scale === \"hour\" ? quantity : 0),\n    date.getMinutes() + (scale === \"minute\" ? quantity : 0),\n    date.getSeconds() + (scale === \"second\" ? quantity : 0),\n    date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0)\n  );\n  return newDate;\n};\n\nexport const startOfDate = (date: Date, scale: DateHelperScales) => {\n  const scores = [\n    \"millisecond\",\n    \"second\",\n    \"minute\",\n    \"hour\",\n    \"day\",\n    \"month\",\n    \"year\",\n  ];\n\n  const shouldReset = (_scale: DateHelperScales) => {\n    const maxScore = scores.indexOf(scale);\n    return scores.indexOf(_scale) <= maxScore;\n  };\n  const newDate = new Date(\n    date.getFullYear(),\n    shouldReset(\"year\") ? 0 : date.getMonth(),\n    shouldReset(\"month\") ? 1 : date.getDate(),\n    shouldReset(\"day\") ? 0 : date.getHours(),\n    shouldReset(\"hour\") ? 0 : date.getMinutes(),\n    shouldReset(\"minute\") ? 0 : date.getSeconds(),\n    shouldReset(\"second\") ? 0 : date.getMilliseconds()\n  );\n  return newDate;\n};\n\nexport const ganttDateRange = (\n  tasks: Task[],\n  viewMode: ViewMode,\n  preStepsCount: number,\n  postStepsCount?: number\n) => {\n  let newStartDate: Date = tasks[0].start;\n  let newEndDate: Date = tasks[0].start;\n  for (const task of tasks) {\n    if (task.start < newStartDate) {\n      newStartDate = task.start;\n    }\n    if (task.end > newEndDate) {\n      newEndDate = task.end;\n    }\n  }\n  switch (viewMode) {\n    case ViewMode.Year:\n      newStartDate = startOfDate(newStartDate, \"year\");\n      newStartDate = addToDate(newStartDate, -1, \"year\");\n      if (!postStepsCount) {\n        newEndDate = startOfDate(newEndDate, \"year\");\n      }\n      newEndDate = addToDate(newEndDate, postStepsCount! || 12, \"month\");\n      break;\n    case ViewMode.QuarterYear:\n      newStartDate = startOfDate(newStartDate, \"month\");\n      newStartDate = addToDate(newStartDate, -3, \"month\");\n      if (!postStepsCount) {\n        newEndDate = startOfDate(newEndDate, \"year\");\n      }\n      newEndDate = addToDate(newEndDate, postStepsCount! * 3 || 36, \"month\");\n      break;\n    case ViewMode.Month:\n      newStartDate = startOfDate(newStartDate, \"month\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"month\");\n      if (!postStepsCount) {\n        newEndDate = startOfDate(newEndDate, \"year\");\n      }\n      newEndDate = addToDate(newEndDate, postStepsCount! || 4, \"month\");\n      break;\n    case ViewMode.Week:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(\n        getMonday(newStartDate),\n        -7 * preStepsCount,\n        \"day\"\n      );\n      if (!postStepsCount) {\n        newEndDate = startOfDate(newEndDate, \"day\");\n      }\n      newEndDate = addToDate(newEndDate, postStepsCount! * 7 || 45, \"day\");\n      break;\n    case ViewMode.Day:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      if (!postStepsCount) {\n        newEndDate = startOfDate(newEndDate, \"day\");\n      }\n      newEndDate = addToDate(newEndDate, postStepsCount! || 19, \"day\");\n      break;\n    case ViewMode.QuarterDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      if (!postStepsCount) {\n        newEndDate = startOfDate(newEndDate, \"day\");\n      }\n      newEndDate = addToDate(newEndDate, postStepsCount! || 66, \"hour\"); // 24(1 day)*3 - 6\n      break;\n    case ViewMode.HalfDay:\n      newStartDate = startOfDate(newStartDate, \"day\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"day\");\n      if (!postStepsCount) {\n        newEndDate = startOfDate(newEndDate, \"day\");\n      }\n      newEndDate = addToDate(newEndDate, postStepsCount! || 108, \"hour\"); // 24(1 day)*5 - 12\n      break;\n    case ViewMode.Hour:\n      newStartDate = startOfDate(newStartDate, \"hour\");\n      newStartDate = addToDate(newStartDate, -1 * preStepsCount, \"hour\");\n      if (!postStepsCount) {\n        newEndDate = startOfDate(newEndDate, \"day\");\n      }\n      newEndDate = addToDate(newEndDate, postStepsCount! || 24, \"hour\");\n      break;\n  }\n  return [newStartDate, newEndDate];\n};\n\nexport const seedDates = (\n  startDate: Date,\n  endDate: Date,\n  viewMode: ViewMode\n) => {\n  let currentDate: Date = new Date(startDate);\n  const dates: Date[] = [currentDate];\n  while (currentDate < endDate) {\n    switch (viewMode) {\n      case ViewMode.Year:\n        currentDate = addToDate(currentDate, 1, \"year\");\n        break;\n      case ViewMode.QuarterYear:\n        currentDate = addToDate(currentDate, 3, \"month\");\n        break;\n      case ViewMode.Month:\n        currentDate = addToDate(currentDate, 1, \"month\");\n        break;\n      case ViewMode.Week:\n        currentDate = addToDate(currentDate, 7, \"day\");\n        break;\n      case ViewMode.Day:\n        currentDate = addToDate(currentDate, 1, \"day\");\n        break;\n      case ViewMode.HalfDay:\n        currentDate = addToDate(currentDate, 12, \"hour\");\n        break;\n      case ViewMode.QuarterDay:\n        currentDate = addToDate(currentDate, 6, \"hour\");\n        break;\n      case ViewMode.Hour:\n        currentDate = addToDate(currentDate, 1, \"hour\");\n        break;\n    }\n    dates.push(currentDate);\n  }\n  return dates;\n};\n\nexport const getLocaleMonth = (date: Date, locale: string) => {\n  let bottomValue = getCachedDateTimeFormat(locale, {\n    month: \"short\",\n  }).format(date);\n  bottomValue = bottomValue.replace(\n    bottomValue[0],\n    bottomValue[0].toLocaleUpperCase()\n  );\n  return bottomValue;\n};\n\nexport const getLocalDayOfWeek = (\n  date: Date,\n  locale: string,\n  format?: \"long\" | \"short\" | \"narrow\" | undefined\n) => {\n  let bottomValue = getCachedDateTimeFormat(locale, {\n    weekday: format,\n  }).format(date);\n  bottomValue = bottomValue.replace(\n    bottomValue[0],\n    bottomValue[0].toLocaleUpperCase()\n  );\n  return bottomValue;\n};\n\n/**\n * Returns monday of current week\n * @param date date for modify\n */\nconst getMonday = (date: Date) => {\n  const day = date.getDay();\n  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\n  return new Date(date.setDate(diff));\n};\n\nexport const getWeekNumberISO8601 = (date: Date) => {\n  const tmpDate = new Date(date.valueOf());\n  const dayNumber = (tmpDate.getDay() + 6) % 7;\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\n  const firstThursday = tmpDate.valueOf();\n  tmpDate.setMonth(0, 1);\n  if (tmpDate.getDay() !== 4) {\n    tmpDate.setMonth(0, 1 + ((4 - tmpDate.getDay() + 7) % 7));\n  }\n  const weekNumber = (\n    1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)\n  ).toString();\n\n  if (weekNumber.length === 1) {\n    return `0${weekNumber}`;\n  } else {\n    return weekNumber;\n  }\n};\n\nexport const getDaysInMonth = (month: number, year: number) => {\n  return new Date(year, month + 1, 0).getDate();\n};\n","import React from \"react\";\nimport styles from \"./task-list-header.module.css\";\n\nexport const TaskListHeaderDefault: React.FC<{\n  headerHeight: number;\n  rowWidth: string;\n  fontFamily: string;\n  fontSize: string;\n}> = ({ headerHeight, fontFamily, fontSize, rowWidth }) => {\n  return (\n    <div\n      className={styles.ganttTable}\n      style={{\n        fontFamily: fontFamily,\n        fontSize: fontSize,\n        borderLeft: \"var(--gtr-border) 1px solid\",\n      }}\n    >\n      <div\n        className={styles.ganttTable_Header}\n        style={{\n          height: headerHeight - 2,\n        }}\n      >\n        <div\n          className={styles.ganttTable_HeaderItem}\n          style={{\n            minWidth: rowWidth,\n          }}\n        >\n          &nbsp;\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useMemo } from \"react\";\nimport styles from \"./task-list-table.module.css\";\nimport { Task } from \"../../types/public-types\";\n\nconst localeDateStringCache = {};\nconst toLocaleDateStringFactory =\n  (locale: string) =>\n  (date: Date, dateTimeOptions: Intl.DateTimeFormatOptions) => {\n    const key = date.toString();\n    let lds = localeDateStringCache[key];\n    if (!lds) {\n      lds = date.toLocaleDateString(locale, dateTimeOptions);\n      localeDateStringCache[key] = lds;\n    }\n    return lds;\n  };\nconst dateTimeOptions: Intl.DateTimeFormatOptions = {\n  weekday: \"short\",\n  year: \"numeric\",\n  month: \"long\",\n  day: \"numeric\",\n};\n\nexport const TaskListTableDefault: React.FC<{\n  rowHeight: number;\n  rowWidth: string;\n  fontFamily: string;\n  fontSize: string;\n  locale: string;\n  tasks: Task[];\n  selectedTaskId: string;\n  setSelectedTask: (taskId: string) => void;\n  onExpanderClick: (task: Task) => void;\n}> = ({\n  rowHeight,\n  rowWidth,\n  tasks,\n  fontFamily,\n  fontSize,\n  locale,\n  onExpanderClick,\n}) => {\n  const toLocaleDateString = useMemo(\n    () => toLocaleDateStringFactory(locale),\n    [locale]\n  );\n\n  return (\n    <div\n      className={styles.taskListWrapper}\n      style={{\n        fontFamily: fontFamily,\n        fontSize: fontSize,\n      }}\n    >\n      {tasks.map(t => {\n        let expanderSymbol = \"\";\n        if (t.hideChildren === false) {\n          expanderSymbol = \"▼\";\n        } else if (t.hideChildren === true) {\n          expanderSymbol = \"▶\";\n        }\n\n        return (\n          <div\n            className={styles.taskListTableRow}\n            style={{ height: rowHeight }}\n            key={`${t.id}row`}\n          >\n            <div\n              className={styles.taskListCell}\n              style={{\n                minWidth: rowWidth,\n                maxWidth: rowWidth,\n                paddingLeft: \"14px\",\n              }}\n              title={t.name}\n            >\n              <div className={styles.taskListNameWrapper}>\n                <div\n                  className={\n                    expanderSymbol\n                      ? styles.taskListExpander\n                      : styles.taskListEmptyExpander\n                  }\n                  onClick={() => onExpanderClick(t)}\n                >\n                  {expanderSymbol}\n                </div>\n                <div\n                  style={{\n                    fontWeight: t.type === \"project\" ? \"bold\" : \"normal\",\n                  }}\n                >\n                  {t.name}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import React, { useRef, useEffect, useState } from \"react\";\nimport dayjs from \"dayjs\";\nimport { Task } from \"../../types/public-types\";\nimport { BarTask } from \"../../types/bar-task\";\nimport styles from \"./tooltip.module.css\";\nimport \"dayjs/locale/es\";\n\nexport type TooltipProps = {\n  task: BarTask;\n  arrowIndent: number;\n  rtl: boolean;\n  svgContainerHeight: number;\n  svgContainerWidth: number;\n  svgWidth: number;\n  headerHeight: number;\n  taskListWidth: number;\n  scrollX: number;\n  scrollY: number;\n  rowHeight: number;\n  fontSize: string;\n  fontFamily: string;\n  TooltipContent: React.FC<{\n    task: Task;\n    fontSize: string;\n    fontFamily: string;\n  }>;\n};\nexport const Tooltip: React.FC<TooltipProps> = ({\n  task,\n  rowHeight,\n  rtl,\n  svgContainerHeight,\n  svgContainerWidth,\n  scrollX,\n  scrollY,\n  arrowIndent,\n  fontSize,\n  fontFamily,\n  headerHeight,\n  taskListWidth,\n  TooltipContent,\n}) => {\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n  const [relatedY, setRelatedY] = useState(0);\n  const [relatedX, setRelatedX] = useState(0);\n  useEffect(() => {\n    if (tooltipRef.current) {\n      const tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\n      const tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\n\n      let newRelatedY = task.index * rowHeight - scrollY + headerHeight;\n      let newRelatedX: number;\n      if (rtl) {\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\n        if (newRelatedX < 0) {\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\n        }\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n        if (tooltipLeftmostPoint > svgContainerWidth) {\n          newRelatedX = svgContainerWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      } else {\n        newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\n        const fullChartWidth = taskListWidth + svgContainerWidth;\n        if (tooltipLeftmostPoint > fullChartWidth) {\n          newRelatedX =\n            task.x1 +\n            taskListWidth -\n            arrowIndent * 1.5 -\n            scrollX -\n            tooltipWidth;\n        }\n        if (newRelatedX < taskListWidth) {\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\n          newRelatedY += rowHeight;\n        }\n      }\n\n      const tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\n        newRelatedY = svgContainerHeight - tooltipHeight;\n      }\n      setRelatedY(newRelatedY);\n      setRelatedX(newRelatedX);\n    }\n  }, [\n    tooltipRef,\n    task,\n    arrowIndent,\n    scrollX,\n    scrollY,\n    headerHeight,\n    taskListWidth,\n    rowHeight,\n    svgContainerHeight,\n    svgContainerWidth,\n    rtl,\n  ]);\n\n  return (\n    <div\n      ref={tooltipRef}\n      className={\n        relatedX\n          ? styles.tooltipDetailsContainer\n          : styles.tooltipDetailsContainerHidden\n      }\n      style={{ left: relatedX, top: relatedY }}\n    >\n      <TooltipContent task={task} fontSize={fontSize} fontFamily={fontFamily} />\n    </div>\n  );\n};\n\nexport const StandardTooltipContent: React.FC<{\n  task: Task;\n  fontSize: string;\n  fontFamily: string;\n}> = ({ task, fontSize, fontFamily }) => {\n  const style = {\n    fontSize,\n    fontFamily,\n  };\n\n  const startDate = dayjs(task.start);\n  const endDate = dayjs(task.end);\n\n  const formattedStartDate = dayjs(task.start).format(\"DD MMMM [de] YYYY\");\n  const formattedEndDate = dayjs(task.end).format(\"DD MMMM [de] YYYY\");\n\n  const durationInDays = dayjs(endDate).diff(startDate, \"day\");\n  const durationInMonths = dayjs(endDate).diff(startDate, \"month\");\n  const durationInYears = dayjs(endDate).diff(startDate, \"year\");\n\n  const duration = `${durationInYears} años, ${durationInMonths % 12} ${\n    durationInMonths === 1 ? \"mes\" : \"meses\"\n  } y ${durationInDays % 30} ${durationInDays === 1 ? \"día\" : \"días\"}`;\n\n  return (\n    <div className={styles.tooltipDefaultContainer} style={style}>\n      <b\n        style={{ fontSize: fontSize + 6 }}\n      >{`${task.name}: De ${formattedStartDate} hasta ${formattedEndDate}`}</b>\n      {task.end.getTime() - task.start.getTime() !== 0 && (\n        <p\n          className={styles.tooltipDefaultContainerParagraph}\n        >{`Duración: ${duration}`}</p>\n      )}\n\n      <p className={styles.tooltipDefaultContainerParagraph}>\n        {!!task.progress && `Progress: ${task.progress} %`}\n      </p>\n    </div>\n  );\n};\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\nimport styles from \"./vertical-scroll.module.css\";\n\nexport const VerticalScroll: React.FC<{\n  scroll: number;\n  ganttHeight: number;\n  ganttFullHeight: number;\n  headerHeight: number;\n  rtl: boolean;\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\n}> = ({\n  scroll,\n  ganttHeight,\n  ganttFullHeight,\n  headerHeight,\n  rtl,\n  onScroll,\n}) => {\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scroll;\n    }\n  }, [scroll]);\n\n  return (\n    <div\n      style={{\n        height: ganttHeight,\n        marginTop: headerHeight,\n        marginLeft: rtl ? \"\" : \"-1rem\",\n      }}\n      className={styles.scroll}\n      onScroll={onScroll}\n      ref={scrollRef}\n    >\n      <div style={{ height: ganttFullHeight, width: 1 }} />\n    </div>\n  );\n};\n","import React, { useEffect, useRef } from \"react\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { Task } from \"../../types/public-types\";\n\nexport type TaskListProps = {\n  headerHeight: number;\n  rowWidth: string;\n  fontFamily: string;\n  fontSize: string;\n  rowHeight: number;\n  ganttHeight: number;\n  scrollY: number;\n  locale: string;\n  tasks: Task[];\n  taskListRef: React.RefObject<HTMLDivElement>;\n  horizontalContainerClass?: string;\n  selectedTask: BarTask | undefined;\n  setSelectedTask: (task: string) => void;\n  onExpanderClick: (task: Task) => void;\n  TaskListHeader: React.FC<{\n    headerHeight: number;\n    rowWidth: string;\n    fontFamily: string;\n    fontSize: string;\n  }>;\n  TaskListTable: React.FC<{\n    rowHeight: number;\n    rowWidth: string;\n    fontFamily: string;\n    fontSize: string;\n    locale: string;\n    tasks: Task[];\n    selectedTaskId: string;\n    setSelectedTask: (taskId: string) => void;\n    onExpanderClick: (task: Task) => void;\n  }>;\n};\n\nexport const TaskList: React.FC<TaskListProps> = ({\n  headerHeight,\n  fontFamily,\n  fontSize,\n  rowWidth,\n  rowHeight,\n  scrollY,\n  tasks,\n  selectedTask,\n  setSelectedTask,\n  onExpanderClick,\n  locale,\n  ganttHeight,\n  taskListRef,\n  horizontalContainerClass,\n  TaskListHeader,\n  TaskListTable,\n}) => {\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n\n  const headerProps = {\n    headerHeight,\n    fontFamily,\n    fontSize,\n    rowWidth,\n  };\n  const selectedTaskId = selectedTask ? selectedTask.id : \"\";\n  const tableProps = {\n    rowHeight,\n    rowWidth,\n    fontFamily,\n    fontSize,\n    tasks,\n    locale,\n    selectedTaskId: selectedTaskId,\n    setSelectedTask,\n    onExpanderClick,\n  };\n\n  return (\n    <div ref={taskListRef}>\n      <TaskListHeader {...headerProps} />\n      <div\n        ref={horizontalContainerRef}\n        className={horizontalContainerClass}\n        style={ganttHeight ? { height: ganttHeight } : {}}\n      >\n        <TaskListTable {...tableProps} />\n      </div>\n    </div>\n  );\n};\n","import React, { ReactChild } from \"react\";\nimport { Task } from \"../../types/public-types\";\nimport { addToDate } from \"../../helpers/date-helper\";\nimport styles from \"./grid.module.css\";\n\nexport type GridBodyProps = {\n  tasks: Task[];\n  dates: Date[];\n  svgWidth: number;\n  rowHeight: number;\n  columnWidth: number;\n  todayColor: string;\n  rtl: boolean;\n};\nexport const GridBody: React.FC<GridBodyProps> = ({\n  tasks,\n  dates,\n  rowHeight,\n  svgWidth,\n  columnWidth,\n  todayColor,\n  rtl,\n}) => {\n  let y = 0;\n  const gridRows: ReactChild[] = [];\n  const rowLines: ReactChild[] = [\n    <line\n      key=\"RowLineFirst\"\n      x=\"0\"\n      y1={0}\n      x2={svgWidth}\n      y2={0}\n      className={styles.gridRowLine}\n    />,\n  ];\n  for (const task of tasks) {\n    gridRows.push(\n      <rect\n        key={\"Row\" + task.id}\n        x=\"0\"\n        y={y}\n        width={svgWidth}\n        height={rowHeight}\n        className={styles.gridRow}\n      />\n    );\n    rowLines.push(\n      <line\n        key={\"RowLine\" + task.id}\n        x=\"0\"\n        y1={y + rowHeight}\n        x2={svgWidth}\n        y2={y + rowHeight}\n        className={styles.gridRowLine}\n      />\n    );\n    y += rowHeight;\n  }\n\n  const now = new Date();\n  let tickX = 0;\n  const ticks: ReactChild[] = [];\n  let today: ReactChild = <rect />;\n  for (let i = 0; i < dates.length; i++) {\n    const date = dates[i];\n    ticks.push(\n      <line\n        key={date.getTime()}\n        x1={tickX}\n        y1={0}\n        x2={tickX}\n        y2={y}\n        className={styles.gridTick}\n      />\n    );\n    if (\n      (i + 1 !== dates.length &&\n        date.getTime() < now.getTime() &&\n        dates[i + 1].getTime() >= now.getTime()) ||\n      // if current date is last\n      (i !== 0 &&\n        i + 1 === dates.length &&\n        date.getTime() < now.getTime() &&\n        addToDate(\n          date,\n          date.getTime() - dates[i - 1].getTime(),\n          \"millisecond\"\n        ).getTime() >= now.getTime())\n    ) {\n      today = (\n        <rect\n          x={tickX}\n          y={0}\n          width={columnWidth}\n          height={y}\n          fill={todayColor}\n        />\n      );\n    }\n    // rtl for today\n    if (\n      rtl &&\n      i + 1 !== dates.length &&\n      date.getTime() >= now.getTime() &&\n      dates[i + 1].getTime() < now.getTime()\n    ) {\n      today = (\n        <rect\n          x={tickX + columnWidth}\n          y={0}\n          width={columnWidth}\n          height={y}\n          fill={todayColor}\n        />\n      );\n    }\n    tickX += columnWidth;\n  }\n  return (\n    <g className=\"gridBody\">\n      <g className=\"rows\">{gridRows}</g>\n      <g className=\"rowLines\">{rowLines}</g>\n      <g className=\"ticks\">{ticks}</g>\n      <g className=\"today\">{today}</g>\n    </g>\n  );\n};\n","import React from \"react\";\nimport { GridBody, GridBodyProps } from \"./grid-body\";\n\nexport type GridProps = GridBodyProps;\nexport const Grid: React.FC<GridProps> = props => {\n  return (\n    <g className=\"grid\">\n      <GridBody {...props} />\n    </g>\n  );\n};\n","import React from \"react\";\nimport styles from \"./calendar.module.css\";\n\ntype TopPartOfCalendarProps = {\n  value: string;\n  x1Line: number;\n  y1Line: number;\n  y2Line: number;\n  xText: number;\n  yText: number;\n};\n\nexport const TopPartOfCalendar: React.FC<TopPartOfCalendarProps> = ({\n  value,\n  x1Line,\n  y1Line,\n  y2Line,\n  xText,\n  yText,\n}) => {\n  return (\n    <g className=\"calendarTop\">\n      <line\n        x1={x1Line}\n        y1={y1Line}\n        x2={x1Line}\n        y2={y2Line}\n        className={styles.calendarTopTick}\n        key={value + \"line\"}\n      />\n      <text\n        key={value + \"text\"}\n        y={yText}\n        x={xText}\n        className={styles.calendarTopText}\n      >\n        {value}\n      </text>\n    </g>\n  );\n};\n","import React, { ReactChild, useRef } from \"react\";\nimport { ViewMode } from \"../../types/public-types\";\nimport { TopPartOfCalendar } from \"./top-part-of-calendar\";\nimport {\n  getCachedDateTimeFormat,\n  getDaysInMonth,\n  getLocalDayOfWeek,\n  getLocaleMonth,\n  getWeekNumberISO8601,\n} from \"../../helpers/date-helper\";\nimport { DateSetup } from \"../../types/date-setup\";\nimport styles from \"./calendar.module.css\";\n\nexport type CalendarProps = {\n  dateSetup: DateSetup;\n  locale: string;\n  viewMode: ViewMode;\n  rtl: boolean;\n  headerHeight: number;\n  svgWidth: number;\n  columnWidth: number;\n  fontFamily: string;\n  fontSize: string;\n};\n\nexport const Calendar: React.FC<CalendarProps> = ({\n  dateSetup,\n  locale,\n  viewMode,\n  rtl,\n  headerHeight,\n  svgWidth,\n  columnWidth,\n  fontFamily,\n  fontSize,\n}) => {\n  const getCalendarValuesForYear = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    for (let i = 0; i < dateSetup.dates.length; i++) {\n      const date = dateSetup.dates[i];\n      const bottomValue = date.toLocaleDateString(locale, { year: \"numeric\" });\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (\n        i === 0 ||\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\n      ) {\n        const topValue = date.getFullYear().toString();\n        let xText: number;\n        if (rtl) {\n          xText = (6 + i + date.getFullYear() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getFullYear()) * columnWidth;\n        }\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue}\n            value={topValue}\n            x1Line={columnWidth * i}\n            y1Line={0}\n            y2Line={headerHeight}\n            xText={xText}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForQuarterYear = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    for (let i = 0; i < dateSetup.dates.length; i++) {\n      const date = dateSetup.dates[i];\n      // const bottomValue = getLocaleMonth(date, locale);\n      const quarter = \"Q\" + Math.floor((date.getMonth() + 3) / 3);\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {quarter}\n        </text>\n      );\n      if (\n        i === 0 ||\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\n      ) {\n        const topValue = date.toLocaleDateString(locale, { year: \"numeric\" });\n        let xText: number;\n        if (rtl) {\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getMonth()) * columnWidth;\n        }\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue}\n            value={topValue}\n            x1Line={columnWidth * i}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={Math.abs(xText)}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForMonth = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    for (let i = 0; i < dateSetup.dates.length; i++) {\n      const date = dateSetup.dates[i];\n      const bottomValue = getLocaleMonth(date, locale);\n      const bottomYearValue = date.getFullYear().toString();\n      bottomValues.push(\n        <text\n          key={bottomValue + date.getFullYear()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue.toUpperCase()} {bottomYearValue}\n        </text>\n      );\n      if (\n        i === 0 ||\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\n      ) {\n        const topValue = date.getFullYear().toString();\n        let xText: number;\n        if (rtl) {\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\n        } else {\n          xText = (6 + i - date.getMonth()) * columnWidth;\n          // When Gantt chart start in the July\n          // Only half of year is visible\n          if (i === 0 && date.getMonth() === 6) {\n            // If default font family and size is used\n            // year label is circa 32px wide\n            // half of it is 16 so moving it by 20 make it fully visible with margin.\n            xText += 20;\n          }\n        }\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue}\n            value={topValue}\n            x1Line={columnWidth * i}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={xText}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForWeek = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    let weeksCount: number = 1;\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = dates.length - 1; i >= 0; i--) {\n      const date = dates[i];\n      let topValue = \"\";\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\n        // top\n        topValue = `${getLocaleMonth(date, locale)}, ${date.getFullYear()}`;\n      }\n      // bottom\n      const bottomValue = `W${getWeekNumberISO8601(date)}`;\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * (i + +rtl)}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n\n      if (topValue) {\n        // if last day is new month\n        if (i !== dates.length - 1) {\n          topValues.push(\n            <TopPartOfCalendar\n              key={topValue}\n              value={topValue}\n              x1Line={columnWidth * i + weeksCount * columnWidth}\n              y1Line={0}\n              y2Line={topDefaultHeight}\n              xText={columnWidth * i + columnWidth * weeksCount * 0.5}\n              yText={topDefaultHeight * 0.9}\n            />\n          );\n        }\n        weeksCount = 0;\n      }\n      weeksCount++;\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForDay = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = 0; i < dates.length; i++) {\n      const date = dates[i];\n      const bottomValue = `${getLocalDayOfWeek(date, locale, \"short\")}, ${date\n        .getDate()\n        .toString()}`;\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * i + columnWidth * 0.5}\n          className={styles.calendarBottomText}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (\n        i + 1 !== dates.length &&\n        date.getMonth() !== dates[i + 1].getMonth()\n      ) {\n        const topValue = getLocaleMonth(date, locale);\n\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue + date.getFullYear()}\n            value={topValue}\n            x1Line={columnWidth * (i + 1)}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={\n              columnWidth * (i + 1) -\n              getDaysInMonth(date.getMonth(), date.getFullYear()) *\n                columnWidth *\n                0.5\n            }\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForPartOfDay = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = 0; i < dates.length; i++) {\n      const date = dates[i];\n      const bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\",\n      }).format(date);\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * (i + +rtl)}\n          className={styles.calendarBottomText}\n          fontFamily={fontFamily}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\n        const topValue = `${getLocalDayOfWeek(\n          date,\n          locale,\n          \"short\"\n        )}, ${date.getDate()} ${getLocaleMonth(date, locale)}`;\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue + date.getFullYear()}\n            value={topValue}\n            x1Line={columnWidth * i + ticks * columnWidth}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={columnWidth * i + ticks * columnWidth * 0.5}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  const getCalendarValuesForHour = () => {\n    const topValues: ReactChild[] = [];\n    const bottomValues: ReactChild[] = [];\n    const topDefaultHeight = headerHeight * 0.5;\n    const dates = dateSetup.dates;\n    for (let i = 0; i < dates.length; i++) {\n      const date = dates[i];\n      const bottomValue = getCachedDateTimeFormat(locale, {\n        hour: \"numeric\",\n      }).format(date);\n\n      bottomValues.push(\n        <text\n          key={date.getTime()}\n          y={headerHeight * 0.8}\n          x={columnWidth * (i + +rtl)}\n          className={styles.calendarBottomText}\n          fontFamily={fontFamily}\n        >\n          {bottomValue}\n        </text>\n      );\n      if (i !== 0 && date.getDate() !== dates[i - 1].getDate()) {\n        const displayDate = dates[i - 1];\n        const topValue = `${getLocalDayOfWeek(\n          displayDate,\n          locale,\n          \"long\"\n        )}, ${displayDate.getDate()} ${getLocaleMonth(displayDate, locale)}`;\n        const topPosition = (date.getHours() - 24) / 2;\n        topValues.push(\n          <TopPartOfCalendar\n            key={topValue + displayDate.getFullYear()}\n            value={topValue}\n            x1Line={columnWidth * i}\n            y1Line={0}\n            y2Line={topDefaultHeight}\n            xText={columnWidth * (i + topPosition)}\n            yText={topDefaultHeight * 0.9}\n          />\n        );\n      }\n    }\n\n    return [topValues, bottomValues];\n  };\n\n  let topValues: ReactChild[] = [];\n  let bottomValues: ReactChild[] = [];\n  switch (dateSetup.viewMode) {\n    case ViewMode.Year:\n      [topValues, bottomValues] = getCalendarValuesForYear();\n      break;\n    case ViewMode.QuarterYear:\n      [topValues, bottomValues] = getCalendarValuesForQuarterYear();\n      break;\n    case ViewMode.Month:\n      [, bottomValues] = getCalendarValuesForMonth();\n      break;\n    case ViewMode.Week:\n      [topValues, bottomValues] = getCalendarValuesForWeek();\n      break;\n    case ViewMode.Day:\n      [topValues, bottomValues] = getCalendarValuesForDay();\n      break;\n    case ViewMode.QuarterDay:\n    case ViewMode.HalfDay:\n      [topValues, bottomValues] = getCalendarValuesForPartOfDay();\n      break;\n    case ViewMode.Hour:\n      [topValues, bottomValues] = getCalendarValuesForHour();\n  }\n\n  return (\n    <g className=\"calendar\" fontSize={fontSize} fontFamily={fontFamily}>\n      <rect\n        x={0}\n        y={0}\n        width={svgWidth}\n        height={headerHeight}\n        className={styles.calendarHeader}\n      />\n      {bottomValues} {topValues}\n    </g>\n  );\n};\n","import React from \"react\";\nimport { BarTask } from \"../../types/bar-task\";\n\ntype ArrowProps = {\n  taskFrom: BarTask;\n  taskTo: BarTask;\n  rowHeight: number;\n  taskHeight: number;\n  arrowIndent: number;\n  rtl: boolean;\n};\nexport const Arrow: React.FC<ArrowProps> = ({\n  taskFrom,\n  taskTo,\n  rowHeight,\n  taskHeight,\n  arrowIndent,\n  rtl,\n}) => {\n  let path: string;\n  let trianglePoints: string;\n  if (rtl) {\n    [path, trianglePoints] = drownPathAndTriangleRTL(\n      taskFrom,\n      taskTo,\n      rowHeight,\n      taskHeight,\n      arrowIndent\n    );\n  } else {\n    [path, trianglePoints] = drownPathAndTriangle(\n      taskFrom,\n      taskTo,\n      rowHeight,\n      taskHeight,\n      arrowIndent\n    );\n  }\n\n  return (\n    <g className=\"arrow\">\n      <path strokeWidth=\"1.5\" d={path} fill=\"none\" />\n      <polygon points={trianglePoints} />\n    </g>\n  );\n};\n\nconst drownPathAndTriangle = (\n  taskFrom: BarTask,\n  taskTo: BarTask,\n  rowHeight: number,\n  taskHeight: number,\n  arrowIndent: number\n) => {\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\n  const taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\n  const taskFromHorizontalOffsetValue =\n    taskFromEndPosition < taskTo.x1 ? \"\" : `H ${taskTo.x1 - arrowIndent}`;\n  const taskToHorizontalOffsetValue =\n    taskFromEndPosition > taskTo.x1\n      ? arrowIndent\n      : taskTo.x1 - taskFrom.x2 - arrowIndent;\n\n  const path = `M ${taskFrom.x2} ${taskFrom.y + taskHeight / 2} \n  h ${arrowIndent} \n  v ${(indexCompare * rowHeight) / 2} \n  ${taskFromHorizontalOffsetValue}\n  V ${taskToEndPosition} \n  h ${taskToHorizontalOffsetValue}`;\n\n  const trianglePoints = `${taskTo.x1},${taskToEndPosition} \n  ${taskTo.x1 - 5},${taskToEndPosition - 5} \n  ${taskTo.x1 - 5},${taskToEndPosition + 5}`;\n  return [path, trianglePoints];\n};\n\nconst drownPathAndTriangleRTL = (\n  taskFrom: BarTask,\n  taskTo: BarTask,\n  rowHeight: number,\n  taskHeight: number,\n  arrowIndent: number\n) => {\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\n  const taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\n  const taskFromHorizontalOffsetValue =\n    taskFromEndPosition > taskTo.x2 ? \"\" : `H ${taskTo.x2 + arrowIndent}`;\n  const taskToHorizontalOffsetValue =\n    taskFromEndPosition < taskTo.x2\n      ? -arrowIndent\n      : taskTo.x2 - taskFrom.x1 + arrowIndent;\n\n  const path = `M ${taskFrom.x1} ${taskFrom.y + taskHeight / 2} \n  h ${-arrowIndent} \n  v ${(indexCompare * rowHeight) / 2} \n  ${taskFromHorizontalOffsetValue}\n  V ${taskToEndPosition} \n  h ${taskToHorizontalOffsetValue}`;\n\n  const trianglePoints = `${taskTo.x2},${taskToEndPosition} \n  ${taskTo.x2 + 5},${taskToEndPosition + 5} \n  ${taskTo.x2 + 5},${taskToEndPosition - 5}`;\n  return [path, trianglePoints];\n};\n","import { Task } from \"../types/public-types\";\nimport { BarTask, TaskTypeInternal } from \"../types/bar-task\";\nimport { BarMoveAction } from \"../types/gantt-task-actions\";\n\nexport const convertToBarTasks = (\n  tasks: Task[],\n  dates: Date[],\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  rtl: boolean,\n  barProgressColor: string,\n  barProgressSelectedColor: string,\n  barBackgroundColor: string,\n  barBackgroundSelectedColor: string,\n  projectProgressColor: string,\n  projectProgressSelectedColor: string,\n  projectBackgroundColor: string,\n  projectBackgroundSelectedColor: string,\n  milestoneBackgroundColor: string,\n  milestoneBackgroundSelectedColor: string\n) => {\n  let barTasks = tasks.map((t, i) => {\n    return convertToBarTask(\n      t,\n      i,\n      dates,\n      columnWidth,\n      rowHeight,\n      taskHeight,\n      barCornerRadius,\n      handleWidth,\n      rtl,\n      barProgressColor,\n      barProgressSelectedColor,\n      barBackgroundColor,\n      barBackgroundSelectedColor,\n      projectProgressColor,\n      projectProgressSelectedColor,\n      projectBackgroundColor,\n      projectBackgroundSelectedColor,\n      milestoneBackgroundColor,\n      milestoneBackgroundSelectedColor\n    );\n  });\n\n  // set dependencies\n  barTasks = barTasks.map(task => {\n    const dependencies = task.dependencies || [];\n    for (let j = 0; j < dependencies.length; j++) {\n      const dependence = barTasks.findIndex(\n        value => value.id === dependencies[j]\n      );\n      if (dependence !== -1) barTasks[dependence].barChildren.push(task);\n    }\n    return task;\n  });\n\n  return barTasks;\n};\n\nconst convertToBarTask = (\n  task: Task,\n  index: number,\n  dates: Date[],\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  rtl: boolean,\n  barProgressColor: string,\n  barProgressSelectedColor: string,\n  barBackgroundColor: string,\n  barBackgroundSelectedColor: string,\n  projectProgressColor: string,\n  projectProgressSelectedColor: string,\n  projectBackgroundColor: string,\n  projectBackgroundSelectedColor: string,\n  milestoneBackgroundColor: string,\n  milestoneBackgroundSelectedColor: string\n): BarTask => {\n  let barTask: BarTask;\n  switch (task.type) {\n    case \"milestone\":\n      barTask = convertToMilestone(\n        task,\n        index,\n        dates,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        milestoneBackgroundColor,\n        milestoneBackgroundSelectedColor\n      );\n      break;\n    case \"project\":\n      barTask = convertToBar(\n        task,\n        index,\n        dates,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        rtl,\n        projectProgressColor,\n        projectProgressSelectedColor,\n        projectBackgroundColor,\n        projectBackgroundSelectedColor\n      );\n      break;\n    default:\n      barTask = convertToBar(\n        task,\n        index,\n        dates,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        rtl,\n        barProgressColor,\n        barProgressSelectedColor,\n        barBackgroundColor,\n        barBackgroundSelectedColor\n      );\n      break;\n  }\n  return barTask;\n};\n\nconst convertToBar = (\n  task: Task,\n  index: number,\n  dates: Date[],\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  rtl: boolean,\n  barProgressColor: string,\n  barProgressSelectedColor: string,\n  barBackgroundColor: string,\n  barBackgroundSelectedColor: string\n): BarTask => {\n  let x1: number;\n  let x2: number;\n  if (rtl) {\n    x2 = taskXCoordinateRTL(task.start, dates, columnWidth);\n    x1 = taskXCoordinateRTL(task.end, dates, columnWidth);\n  } else {\n    x1 = taskXCoordinate(task.start, dates, columnWidth);\n    x2 = taskXCoordinate(task.end, dates, columnWidth);\n  }\n  let typeInternal: TaskTypeInternal = task.type;\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\n    typeInternal = \"smalltask\";\n    x2 = x1 + handleWidth * 2;\n  }\n\n  const [progressWidth, progressX] = progressWithByParams(\n    x1,\n    x2,\n    task.progress,\n    rtl\n  );\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\n  const hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\n\n  const styles = {\n    backgroundColor: barBackgroundColor,\n    backgroundSelectedColor: barBackgroundSelectedColor,\n    progressColor: barProgressColor,\n    progressSelectedColor: barProgressSelectedColor,\n    ...task.styles,\n  };\n  return {\n    ...task,\n    typeInternal,\n    x1,\n    x2,\n    y,\n    index,\n    progressX,\n    progressWidth,\n    barCornerRadius,\n    handleWidth,\n    hideChildren,\n    height: taskHeight,\n    barChildren: [],\n    styles,\n  };\n};\n\nconst convertToMilestone = (\n  task: Task,\n  index: number,\n  dates: Date[],\n  columnWidth: number,\n  rowHeight: number,\n  taskHeight: number,\n  barCornerRadius: number,\n  handleWidth: number,\n  milestoneBackgroundColor: string,\n  milestoneBackgroundSelectedColor: string\n): BarTask => {\n  const x = taskXCoordinate(task.start, dates, columnWidth);\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\n\n  const x1 = x - taskHeight * 0.5;\n  const x2 = x + taskHeight * 0.5;\n\n  const rotatedHeight = taskHeight / 1.414;\n  const styles = {\n    backgroundColor: milestoneBackgroundColor,\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\n    progressColor: \"\",\n    progressSelectedColor: \"\",\n    ...task.styles,\n  };\n  return {\n    ...task,\n    end: task.start,\n    x1,\n    x2,\n    y,\n    index,\n    progressX: 0,\n    progressWidth: 0,\n    barCornerRadius,\n    handleWidth,\n    typeInternal: task.type,\n    progress: 0,\n    height: rotatedHeight,\n    hideChildren: undefined,\n    barChildren: [],\n    styles,\n  };\n};\n\nconst taskXCoordinate = (xDate: Date, dates: Date[], columnWidth: number) => {\n  const index = dates.findIndex(d => d.getTime() >= xDate.getTime()) - 1;\n\n  const remainderMillis = xDate.getTime() - dates[index].getTime();\n  const percentOfInterval =\n    remainderMillis / (dates[index + 1].getTime() - dates[index].getTime());\n  const x = index * columnWidth + percentOfInterval * columnWidth;\n  return x;\n};\nconst taskXCoordinateRTL = (\n  xDate: Date,\n  dates: Date[],\n  columnWidth: number\n) => {\n  let x = taskXCoordinate(xDate, dates, columnWidth);\n  x += columnWidth;\n  return x;\n};\nconst taskYCoordinate = (\n  index: number,\n  rowHeight: number,\n  taskHeight: number\n) => {\n  const y = index * rowHeight + (rowHeight - taskHeight) / 2;\n  return y;\n};\n\nexport const progressWithByParams = (\n  taskX1: number,\n  taskX2: number,\n  progress: number,\n  rtl: boolean\n) => {\n  const progressWidth = (taskX2 - taskX1) * progress * 0.01;\n  let progressX: number;\n  if (rtl) {\n    progressX = taskX2 - progressWidth;\n  } else {\n    progressX = taskX1;\n  }\n  return [progressWidth, progressX];\n};\n\nexport const progressByProgressWidth = (\n  progressWidth: number,\n  barTask: BarTask\n) => {\n  const barWidth = barTask.x2 - barTask.x1;\n  const progressPercent = Math.round((progressWidth * 100) / barWidth);\n  if (progressPercent >= 100) return 100;\n  else if (progressPercent <= 0) return 0;\n  else return progressPercent;\n};\n\nconst progressByX = (x: number, task: BarTask) => {\n  if (x >= task.x2) return 100;\n  else if (x <= task.x1) return 0;\n  else {\n    const barWidth = task.x2 - task.x1;\n    const progressPercent = Math.round(((x - task.x1) * 100) / barWidth);\n    return progressPercent;\n  }\n};\nconst progressByXRTL = (x: number, task: BarTask) => {\n  if (x >= task.x2) return 0;\n  else if (x <= task.x1) return 100;\n  else {\n    const barWidth = task.x2 - task.x1;\n    const progressPercent = Math.round(((task.x2 - x) * 100) / barWidth);\n    return progressPercent;\n  }\n};\n\nexport const getProgressPoint = (\n  progressX: number,\n  taskY: number,\n  taskHeight: number\n) => {\n  const point = [\n    progressX - 5,\n    taskY + taskHeight,\n    progressX + 5,\n    taskY + taskHeight,\n    progressX,\n    taskY + taskHeight - 8.66,\n  ];\n  return point.join(\",\");\n};\n\nconst startByX = (x: number, xStep: number, task: BarTask) => {\n  if (x >= task.x2 - task.handleWidth * 2) {\n    x = task.x2 - task.handleWidth * 2;\n  }\n  const steps = Math.round((x - task.x1) / xStep);\n  const additionalXValue = steps * xStep;\n  const newX = task.x1 + additionalXValue;\n  return newX;\n};\n\nconst endByX = (x: number, xStep: number, task: BarTask) => {\n  if (x <= task.x1 + task.handleWidth * 2) {\n    x = task.x1 + task.handleWidth * 2;\n  }\n  const steps = Math.round((x - task.x2) / xStep);\n  const additionalXValue = steps * xStep;\n  const newX = task.x2 + additionalXValue;\n  return newX;\n};\n\nconst moveByX = (x: number, xStep: number, task: BarTask) => {\n  const steps = Math.round((x - task.x1) / xStep);\n  const additionalXValue = steps * xStep;\n  const newX1 = task.x1 + additionalXValue;\n  const newX2 = newX1 + task.x2 - task.x1;\n  return [newX1, newX2];\n};\n\nconst dateByX = (\n  x: number,\n  taskX: number,\n  taskDate: Date,\n  xStep: number,\n  timeStep: number\n) => {\n  let newDate = new Date(((x - taskX) / xStep) * timeStep + taskDate.getTime());\n  newDate = new Date(\n    newDate.getTime() +\n      (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000\n  );\n  return newDate;\n};\n\n/**\n * Method handles event in real time(mousemove) and on finish(mouseup)\n */\nexport const handleTaskBySVGMouseEvent = (\n  svgX: number,\n  action: BarMoveAction,\n  selectedTask: BarTask,\n  xStep: number,\n  timeStep: number,\n  initEventX1Delta: number,\n  rtl: boolean\n): { isChanged: boolean; changedTask: BarTask } => {\n  let result: { isChanged: boolean; changedTask: BarTask };\n  switch (selectedTask.type) {\n    case \"milestone\":\n      result = handleTaskBySVGMouseEventForMilestone(\n        svgX,\n        action,\n        selectedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta\n      );\n      break;\n    default:\n      result = handleTaskBySVGMouseEventForBar(\n        svgX,\n        action,\n        selectedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta,\n        rtl\n      );\n      break;\n  }\n  return result;\n};\n\nconst handleTaskBySVGMouseEventForBar = (\n  svgX: number,\n  action: BarMoveAction,\n  selectedTask: BarTask,\n  xStep: number,\n  timeStep: number,\n  initEventX1Delta: number,\n  rtl: boolean\n): { isChanged: boolean; changedTask: BarTask } => {\n  const changedTask: BarTask = { ...selectedTask };\n  let isChanged = false;\n  switch (action) {\n    case \"progress\":\n      if (rtl) {\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\n      } else {\n        changedTask.progress = progressByX(svgX, selectedTask);\n      }\n      isChanged = changedTask.progress !== selectedTask.progress;\n      if (isChanged) {\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    case \"start\": {\n      const newX1 = startByX(svgX, xStep, selectedTask);\n      changedTask.x1 = newX1;\n      isChanged = changedTask.x1 !== selectedTask.x1;\n      if (isChanged) {\n        if (rtl) {\n          changedTask.end = dateByX(\n            newX1,\n            selectedTask.x1,\n            selectedTask.end,\n            xStep,\n            timeStep\n          );\n        } else {\n          changedTask.start = dateByX(\n            newX1,\n            selectedTask.x1,\n            selectedTask.start,\n            xStep,\n            timeStep\n          );\n        }\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    }\n    case \"end\": {\n      const newX2 = endByX(svgX, xStep, selectedTask);\n      changedTask.x2 = newX2;\n      isChanged = changedTask.x2 !== selectedTask.x2;\n      if (isChanged) {\n        if (rtl) {\n          changedTask.start = dateByX(\n            newX2,\n            selectedTask.x2,\n            selectedTask.start,\n            xStep,\n            timeStep\n          );\n        } else {\n          changedTask.end = dateByX(\n            newX2,\n            selectedTask.x2,\n            selectedTask.end,\n            xStep,\n            timeStep\n          );\n        }\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    }\n    case \"move\": {\n      const [newMoveX1, newMoveX2] = moveByX(\n        svgX - initEventX1Delta,\n        xStep,\n        selectedTask\n      );\n      isChanged = newMoveX1 !== selectedTask.x1;\n      if (isChanged) {\n        changedTask.start = dateByX(\n          newMoveX1,\n          selectedTask.x1,\n          selectedTask.start,\n          xStep,\n          timeStep\n        );\n        changedTask.end = dateByX(\n          newMoveX2,\n          selectedTask.x2,\n          selectedTask.end,\n          xStep,\n          timeStep\n        );\n        changedTask.x1 = newMoveX1;\n        changedTask.x2 = newMoveX2;\n        const [progressWidth, progressX] = progressWithByParams(\n          changedTask.x1,\n          changedTask.x2,\n          changedTask.progress,\n          rtl\n        );\n        changedTask.progressWidth = progressWidth;\n        changedTask.progressX = progressX;\n      }\n      break;\n    }\n  }\n  return { isChanged, changedTask };\n};\n\nconst handleTaskBySVGMouseEventForMilestone = (\n  svgX: number,\n  action: BarMoveAction,\n  selectedTask: BarTask,\n  xStep: number,\n  timeStep: number,\n  initEventX1Delta: number\n): { isChanged: boolean; changedTask: BarTask } => {\n  const changedTask: BarTask = { ...selectedTask };\n  let isChanged = false;\n  switch (action) {\n    case \"move\": {\n      const [newMoveX1, newMoveX2] = moveByX(\n        svgX - initEventX1Delta,\n        xStep,\n        selectedTask\n      );\n      isChanged = newMoveX1 !== selectedTask.x1;\n      if (isChanged) {\n        changedTask.start = dateByX(\n          newMoveX1,\n          selectedTask.x1,\n          selectedTask.start,\n          xStep,\n          timeStep\n        );\n        changedTask.end = changedTask.start;\n        changedTask.x1 = newMoveX1;\n        changedTask.x2 = newMoveX2;\n      }\n      break;\n    }\n  }\n  return { isChanged, changedTask };\n};\n","import { BarTask } from \"../types/bar-task\";\nimport { Task } from \"../types/public-types\";\n\nexport function isKeyboardEvent(\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\n): event is React.KeyboardEvent {\n  return (event as React.KeyboardEvent).key !== undefined;\n}\n\nexport function isMouseEvent(\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\n): event is React.MouseEvent {\n  return (event as React.MouseEvent).clientX !== undefined;\n}\n\nexport function isBarTask(task: Task | BarTask): task is BarTask {\n  return (task as BarTask).x1 !== undefined;\n}\n\nexport function removeHiddenTasks(tasks: Task[]) {\n  const groupedTasks = tasks.filter(\n    t => t.hideChildren && t.type === \"project\"\n  );\n  if (groupedTasks.length > 0) {\n    for (let i = 0; groupedTasks.length > i; i++) {\n      const groupedTask = groupedTasks[i];\n      const children = getChildren(tasks, groupedTask);\n      tasks = tasks.filter(t => children.indexOf(t) === -1);\n    }\n  }\n  return tasks;\n}\n\nfunction getChildren(taskList: Task[], task: Task) {\n  let tasks: Task[] = [];\n  if (task.type !== \"project\") {\n    tasks = taskList.filter(\n      t => t.dependencies && t.dependencies.indexOf(task.id) !== -1\n    );\n  } else {\n    tasks = taskList.filter(t => t.project && t.project === task.id);\n  }\n  var taskChildren: Task[] = [];\n  tasks.forEach(t => {\n    taskChildren.push(...getChildren(taskList, t));\n  })\n  tasks = tasks.concat(tasks, taskChildren);\n  return tasks;\n}\n\nexport const sortTasks = (taskA: Task, taskB: Task) => {\n  const orderA = taskA.displayOrder || Number.MAX_VALUE;\n  const orderB = taskB.displayOrder || Number.MAX_VALUE;\n  if (orderA > orderB) {\n    return 1;\n  } else if (orderA < orderB) {\n    return -1;\n  } else {\n    return 0;\n  }\n};\n","import React from \"react\";\nimport style from \"./bar.module.css\";\n\ntype BarDisplayProps = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  isSelected: boolean;\n  /* progress start point */\n  progressX: number;\n  progressWidth: number;\n  barCornerRadius: number;\n  styles: {\n    backgroundColor: string;\n    backgroundSelectedColor: string;\n    progressColor: string;\n    progressSelectedColor: string;\n  };\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\n};\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\n  x,\n  y,\n  width,\n  height,\n  isSelected,\n  progressX,\n  progressWidth,\n  barCornerRadius,\n  styles,\n  onMouseDown,\n}) => {\n  const getProcessColor = () => {\n    return isSelected ? styles.progressSelectedColor : styles.progressColor;\n  };\n\n  const getBarColor = () => {\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\n  };\n\n  return (\n    <g onMouseDown={onMouseDown}>\n      <rect\n        x={x}\n        width={width}\n        y={y}\n        height={height}\n        ry={barCornerRadius}\n        rx={barCornerRadius}\n        fill={getBarColor()}\n        className={style.barBackground}\n      />\n      <rect\n        x={progressX}\n        width={progressWidth}\n        y={y}\n        height={height}\n        ry={barCornerRadius}\n        rx={barCornerRadius}\n        fill={getProcessColor()}\n      />\n    </g>\n  );\n};\n","import React from \"react\";\nimport styles from \"./bar.module.css\";\n\ntype BarDateHandleProps = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  barCornerRadius: number;\n  onMouseDown: (event: React.MouseEvent<SVGRectElement, MouseEvent>) => void;\n};\nexport const BarDateHandle: React.FC<BarDateHandleProps> = ({\n  x,\n  y,\n  width,\n  height,\n  barCornerRadius,\n  onMouseDown,\n}) => {\n  return (\n    <rect\n      x={x}\n      y={y}\n      width={width}\n      height={height}\n      className={styles.barHandle}\n      ry={barCornerRadius}\n      rx={barCornerRadius}\n      onMouseDown={onMouseDown}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./bar.module.css\";\n\ntype BarProgressHandleProps = {\n  progressPoint: string;\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\n};\nexport const BarProgressHandle: React.FC<BarProgressHandleProps> = ({\n  progressPoint,\n  onMouseDown,\n}) => {\n  return (\n    <polygon\n      className={styles.barHandle}\n      points={progressPoint}\n      onMouseDown={onMouseDown}\n    />\n  );\n};\n","import React from \"react\";\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\nimport { BarDisplay } from \"./bar-display\";\nimport { BarDateHandle } from \"./bar-date-handle\";\nimport { BarProgressHandle } from \"./bar-progress-handle\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./bar.module.css\";\n\nexport const Bar: React.FC<TaskItemProps> = ({\n  task,\n  isProgressChangeable,\n  isDateChangeable,\n  rtl,\n  onEventStart,\n  isSelected,\n}) => {\n  const progressPoint = getProgressPoint(\n    +!rtl * task.progressWidth + task.progressX,\n    task.y,\n    task.height\n  );\n  const handleHeight = task.height - 2;\n  return (\n    <g className={styles.barWrapper} tabIndex={0}>\n      <BarDisplay\n        x={task.x1}\n        y={task.y}\n        width={task.x2 - task.x1}\n        height={task.height}\n        progressX={task.progressX}\n        progressWidth={task.progressWidth}\n        barCornerRadius={task.barCornerRadius}\n        styles={task.styles}\n        isSelected={isSelected}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n      <g className=\"handleGroup\">\n        {isDateChangeable && (\n          <g>\n            {/* left */}\n            <BarDateHandle\n              x={task.x1 + 1}\n              y={task.y + 1}\n              width={task.handleWidth}\n              height={handleHeight}\n              barCornerRadius={task.barCornerRadius}\n              onMouseDown={e => {\n                onEventStart(\"start\", task, e);\n              }}\n            />\n            {/* right */}\n            <BarDateHandle\n              x={task.x2 - task.handleWidth - 1}\n              y={task.y + 1}\n              width={task.handleWidth}\n              height={handleHeight}\n              barCornerRadius={task.barCornerRadius}\n              onMouseDown={e => {\n                onEventStart(\"end\", task, e);\n              }}\n            />\n          </g>\n        )}\n        {isProgressChangeable && (\n          <BarProgressHandle\n            progressPoint={progressPoint}\n            onMouseDown={e => {\n              onEventStart(\"progress\", task, e);\n            }}\n          />\n        )}\n      </g>\n    </g>\n  );\n};\n","import React from \"react\";\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\nimport { BarDisplay } from \"./bar-display\";\nimport { BarProgressHandle } from \"./bar-progress-handle\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./bar.module.css\";\n\nexport const BarSmall: React.FC<TaskItemProps> = ({\n  task,\n  isProgressChangeable,\n  isDateChangeable,\n  onEventStart,\n  isSelected,\n}) => {\n  const progressPoint = getProgressPoint(\n    task.progressWidth + task.x1,\n    task.y,\n    task.height\n  );\n  return (\n    <g className={styles.barWrapper} tabIndex={0}>\n      <BarDisplay\n        x={task.x1}\n        y={task.y}\n        width={task.x2 - task.x1}\n        height={task.height}\n        progressX={task.progressX}\n        progressWidth={task.progressWidth}\n        barCornerRadius={task.barCornerRadius}\n        styles={task.styles}\n        isSelected={isSelected}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n      <g className=\"handleGroup\">\n        {isProgressChangeable && (\n          <BarProgressHandle\n            progressPoint={progressPoint}\n            onMouseDown={e => {\n              onEventStart(\"progress\", task, e);\n            }}\n          />\n        )}\n      </g>\n    </g>\n  );\n};\n","import React from \"react\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./milestone.module.css\";\n\nexport const Milestone: React.FC<TaskItemProps> = ({\n  task,\n  isDateChangeable,\n  onEventStart,\n  isSelected,\n}) => {\n  const transform = `rotate(45 ${task.x1 + task.height * 0.356} \n    ${task.y + task.height * 0.85})`;\n  const getBarColor = () => {\n    return isSelected\n      ? task.styles.backgroundSelectedColor\n      : task.styles.backgroundColor;\n  };\n\n  return (\n    <g tabIndex={0} className={styles.milestoneWrapper}>\n      <rect\n        fill={getBarColor()}\n        x={task.x1}\n        width={task.height}\n        y={task.y}\n        height={task.height}\n        rx={task.barCornerRadius}\n        ry={task.barCornerRadius}\n        transform={transform}\n        className={styles.milestoneBackground}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n    </g>\n  );\n};\n","import React from \"react\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./project.module.css\";\n\nexport const Project: React.FC<TaskItemProps> = ({ task, isSelected }) => {\n  const barColor = isSelected\n    ? task.styles.backgroundSelectedColor\n    : task.styles.backgroundColor;\n  const processColor = isSelected\n    ? task.styles.progressSelectedColor\n    : task.styles.progressColor;\n  const projectWith = task.x2 - task.x1;\n\n  const projectLeftTriangle = [\n    task.x1,\n    task.y + task.height / 2 - 1,\n    task.x1,\n    task.y + task.height,\n    task.x1 + 15,\n    task.y + task.height / 2 - 1,\n  ].join(\",\");\n  const projectRightTriangle = [\n    task.x2,\n    task.y + task.height / 2 - 1,\n    task.x2,\n    task.y + task.height,\n    task.x2 - 15,\n    task.y + task.height / 2 - 1,\n  ].join(\",\");\n\n  return (\n    <g tabIndex={0} className={styles.projectWrapper}>\n      <rect\n        fill={barColor}\n        x={task.x1}\n        width={projectWith}\n        y={task.y}\n        height={task.height}\n        rx={task.barCornerRadius}\n        ry={task.barCornerRadius}\n        className={styles.projectBackground}\n      />\n      <rect\n        x={task.progressX}\n        width={task.progressWidth}\n        y={task.y}\n        height={task.height}\n        ry={task.barCornerRadius}\n        rx={task.barCornerRadius}\n        fill={processColor}\n      />\n      <rect\n        fill={barColor}\n        x={task.x1}\n        width={projectWith}\n        y={task.y}\n        height={task.height / 2}\n        rx={task.barCornerRadius}\n        ry={task.barCornerRadius}\n        className={styles.projectTop}\n      />\n      <polygon\n        className={styles.projectTop}\n        points={projectLeftTriangle}\n        fill={barColor}\n      />\n      <polygon\n        className={styles.projectTop}\n        points={projectRightTriangle}\n        fill={barColor}\n      />\n    </g>\n  );\n};\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { GanttContentMoveAction } from \"../../types/gantt-task-actions\";\nimport { Bar } from \"./bar/bar\";\nimport { BarSmall } from \"./bar/bar-small\";\nimport { Milestone } from \"./milestone/milestone\";\nimport { Project } from \"./project/project\";\nimport style from \"./task-list.module.css\";\n\nexport type TaskItemProps = {\n  task: BarTask;\n  arrowIndent: number;\n  taskHeight: number;\n  isProgressChangeable: boolean;\n  isDateChangeable: boolean;\n  isDelete: boolean;\n  isSelected: boolean;\n  rtl: boolean;\n  onEventStart: (\n    action: GanttContentMoveAction,\n    selectedTask: BarTask,\n    event?: React.MouseEvent | React.KeyboardEvent\n  ) => any;\n};\n\nexport const TaskItem: React.FC<TaskItemProps> = props => {\n  const {\n    task,\n    arrowIndent,\n    isDelete,\n    taskHeight,\n    isSelected,\n    rtl,\n    onEventStart,\n  } = {\n    ...props,\n  };\n  const textRef = useRef<SVGTextElement>(null);\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\n  const [isTextInside, setIsTextInside] = useState(true);\n\n  useEffect(() => {\n    switch (task.typeInternal) {\n      case \"milestone\":\n        setTaskItem(<Milestone {...props} />);\n        break;\n      case \"project\":\n        setTaskItem(<Project {...props} />);\n        break;\n      case \"smalltask\":\n        setTaskItem(<BarSmall {...props} />);\n        break;\n      default:\n        setTaskItem(<Bar {...props} />);\n        break;\n    }\n  }, [task, isSelected, props]);\n\n  useEffect(() => {\n    if (textRef.current) {\n      setIsTextInside(textRef.current.getBBox().width < task.x2 - task.x1);\n    }\n  }, [textRef, task]);\n\n  const getX = () => {\n    const width = task.x2 - task.x1;\n    const hasChild = task.barChildren.length > 0;\n    if (isTextInside) {\n      return task.x1 + width * 0.5;\n    }\n    if (rtl && textRef.current) {\n      return (\n        task.x1 -\n        textRef.current.getBBox().width -\n        arrowIndent * +hasChild -\n        arrowIndent * 0.2\n      );\n    } else {\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\n    }\n  };\n\n  return (\n    <g\n      onKeyDown={e => {\n        switch (e.key) {\n          case \"Delete\": {\n            if (isDelete) onEventStart(\"delete\", task, e);\n            break;\n          }\n        }\n        e.stopPropagation();\n      }}\n      onMouseEnter={e => {\n        onEventStart(\"mouseenter\", task, e);\n      }}\n      onMouseLeave={e => {\n        onEventStart(\"mouseleave\", task, e);\n      }}\n      onDoubleClick={e => {\n        onEventStart(\"dblclick\", task, e);\n      }}\n      onClick={e => {\n        onEventStart(\"click\", task, e);\n      }}\n      onFocus={() => {\n        onEventStart(\"select\", task);\n      }}\n    >\n      {taskItem}\n      <text\n        x={getX()}\n        y={task.y + taskHeight * 0.5}\n        className={\n          isTextInside\n            ? style.barLabel\n            : style.barLabel && style.barLabelOutside\n        }\n        ref={textRef}\n      >\n        {task.name}\n      </text>\n    </g>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { EventOption } from \"../../types/public-types\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { Arrow } from \"../other/arrow\";\nimport { handleTaskBySVGMouseEvent } from \"../../helpers/bar-helper\";\nimport { isKeyboardEvent } from \"../../helpers/other-helper\";\nimport { TaskItem } from \"../task-item/task-item\";\nimport {\n  BarMoveAction,\n  GanttContentMoveAction,\n  GanttEvent,\n} from \"../../types/gantt-task-actions\";\n\nexport type TaskGanttContentProps = {\n  tasks: BarTask[];\n  dates: Date[];\n  ganttEvent: GanttEvent;\n  selectedTask: BarTask | undefined;\n  rowHeight: number;\n  columnWidth: number;\n  timeStep: number;\n  svg?: React.RefObject<SVGSVGElement>;\n  svgWidth: number;\n  taskHeight: number;\n  arrowColor: string;\n  arrowIndent: number;\n  fontSize: string;\n  fontFamily: string;\n  rtl: boolean;\n  setGanttEvent: (value: GanttEvent) => void;\n  setFailedTask: (value: BarTask | null) => void;\n  setSelectedTask: (taskId: string) => void;\n} & EventOption;\n\nexport const TaskGanttContent: React.FC<TaskGanttContentProps> = ({\n  tasks,\n  dates,\n  ganttEvent,\n  selectedTask,\n  rowHeight,\n  columnWidth,\n  timeStep,\n  svg,\n  taskHeight,\n  arrowColor,\n  arrowIndent,\n  fontFamily,\n  fontSize,\n  rtl,\n  setGanttEvent,\n  setFailedTask,\n  setSelectedTask,\n  onDateChange,\n  onProgressChange,\n  onDoubleClick,\n  onClick,\n  onDelete,\n}) => {\n  const point = svg?.current?.createSVGPoint();\n  const [xStep, setXStep] = useState(0);\n  const [initEventX1Delta, setInitEventX1Delta] = useState(0);\n  const [isMoving, setIsMoving] = useState(false);\n\n  // create xStep\n  useEffect(() => {\n    const dateDelta =\n      dates[1].getTime() -\n      dates[0].getTime() -\n      dates[1].getTimezoneOffset() * 60 * 1000 +\n      dates[0].getTimezoneOffset() * 60 * 1000;\n    const newXStep = (timeStep * columnWidth) / dateDelta;\n    setXStep(newXStep);\n  }, [columnWidth, dates, timeStep]);\n\n  useEffect(() => {\n    const handleMouseMove = async (event: MouseEvent) => {\n      if (!ganttEvent.changedTask || !point || !svg?.current) return;\n      event.preventDefault();\n\n      point.x = event.clientX;\n      const cursor = point.matrixTransform(\n        svg?.current.getScreenCTM()?.inverse()\n      );\n\n      const { isChanged, changedTask } = handleTaskBySVGMouseEvent(\n        cursor.x,\n        ganttEvent.action as BarMoveAction,\n        ganttEvent.changedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta,\n        rtl\n      );\n      if (isChanged) {\n        setGanttEvent({ action: ganttEvent.action, changedTask });\n      }\n    };\n\n    const handleMouseUp = async (event: MouseEvent) => {\n      const { action, originalSelectedTask, changedTask } = ganttEvent;\n      if (!changedTask || !point || !svg?.current || !originalSelectedTask)\n        return;\n      event.preventDefault();\n\n      point.x = event.clientX;\n      const cursor = point.matrixTransform(\n        svg?.current.getScreenCTM()?.inverse()\n      );\n      const { changedTask: newChangedTask } = handleTaskBySVGMouseEvent(\n        cursor.x,\n        action as BarMoveAction,\n        changedTask,\n        xStep,\n        timeStep,\n        initEventX1Delta,\n        rtl\n      );\n\n      const isNotLikeOriginal =\n        originalSelectedTask.start !== newChangedTask.start ||\n        originalSelectedTask.end !== newChangedTask.end ||\n        originalSelectedTask.progress !== newChangedTask.progress;\n\n      // remove listeners\n      svg.current.removeEventListener(\"mousemove\", handleMouseMove);\n      svg.current.removeEventListener(\"mouseup\", handleMouseUp);\n      setGanttEvent({ action: \"\" });\n      setIsMoving(false);\n\n      // custom operation start\n      let operationSuccess = true;\n      if (\n        (action === \"move\" || action === \"end\" || action === \"start\") &&\n        onDateChange &&\n        isNotLikeOriginal\n      ) {\n        try {\n          const result = await onDateChange(\n            newChangedTask,\n            newChangedTask.barChildren\n          );\n          if (result !== undefined) {\n            operationSuccess = result;\n          }\n        } catch (error) {\n          operationSuccess = false;\n        }\n      } else if (onProgressChange && isNotLikeOriginal) {\n        try {\n          const result = await onProgressChange(\n            newChangedTask,\n            newChangedTask.barChildren\n          );\n          if (result !== undefined) {\n            operationSuccess = result;\n          }\n        } catch (error) {\n          operationSuccess = false;\n        }\n      }\n\n      // If operation is failed - return old state\n      if (!operationSuccess) {\n        setFailedTask(originalSelectedTask);\n      }\n    };\n\n    if (\n      !isMoving &&\n      (ganttEvent.action === \"move\" ||\n        ganttEvent.action === \"end\" ||\n        ganttEvent.action === \"start\" ||\n        ganttEvent.action === \"progress\") &&\n      svg?.current\n    ) {\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\n      svg.current.addEventListener(\"mouseup\", handleMouseUp);\n      setIsMoving(true);\n    }\n  }, [\n    ganttEvent,\n    xStep,\n    initEventX1Delta,\n    onProgressChange,\n    timeStep,\n    onDateChange,\n    svg,\n    isMoving,\n    point,\n    rtl,\n    setFailedTask,\n    setGanttEvent,\n  ]);\n\n  /**\n   * Method is Start point of task change\n   */\n  const handleBarEventStart = async (\n    action: GanttContentMoveAction,\n    task: BarTask,\n    event?: React.MouseEvent | React.KeyboardEvent\n  ) => {\n    if (!event) {\n      if (action === \"select\") {\n        setSelectedTask(task.id);\n      }\n    }\n    // Keyboard events\n    else if (isKeyboardEvent(event)) {\n      if (action === \"delete\") {\n        if (onDelete) {\n          try {\n            const result = await onDelete(task);\n            if (result !== undefined && result) {\n              setGanttEvent({ action, changedTask: task });\n            }\n          } catch (error) {\n            console.error(\"Error on Delete. \" + error);\n          }\n        }\n      }\n    }\n    // Mouse Events\n    else if (action === \"mouseenter\") {\n      if (!ganttEvent.action) {\n        setGanttEvent({\n          action,\n          changedTask: task,\n          originalSelectedTask: task,\n        });\n      }\n    } else if (action === \"mouseleave\") {\n      if (ganttEvent.action === \"mouseenter\") {\n        setGanttEvent({ action: \"\" });\n      }\n    } else if (action === \"dblclick\") {\n      !!onDoubleClick && onDoubleClick(task);\n    } else if (action === \"click\") {\n      !!onClick && onClick(task);\n    }\n    // Change task event start\n    else if (action === \"move\") {\n      if (!svg?.current || !point) return;\n      point.x = event.clientX;\n      const cursor = point.matrixTransform(\n        svg.current.getScreenCTM()?.inverse()\n      );\n      setInitEventX1Delta(cursor.x - task.x1);\n      setGanttEvent({\n        action,\n        changedTask: task,\n        originalSelectedTask: task,\n      });\n    } else {\n      setGanttEvent({\n        action,\n        changedTask: task,\n        originalSelectedTask: task,\n      });\n    }\n  };\n\n  return (\n    <g className=\"content\">\n      <g className=\"arrows\" fill={arrowColor} stroke={arrowColor}>\n        {tasks.map(task => {\n          return task.barChildren.map(child => {\n            return (\n              <Arrow\n                key={`Arrow from ${task.id} to ${tasks[child.index].id}`}\n                taskFrom={task}\n                taskTo={tasks[child.index]}\n                rowHeight={rowHeight}\n                taskHeight={taskHeight}\n                arrowIndent={arrowIndent}\n                rtl={rtl}\n              />\n            );\n          });\n        })}\n      </g>\n      <g className=\"bar\" fontFamily={fontFamily} fontSize={fontSize}>\n        {tasks.map(task => {\n          return (\n            task.type !== \"project\" && (\n              <TaskItem\n                task={task}\n                arrowIndent={arrowIndent}\n                taskHeight={taskHeight}\n                isProgressChangeable={!!onProgressChange && !task.isDisabled}\n                isDateChangeable={!!onDateChange && !task.isDisabled}\n                isDelete={!task.isDisabled}\n                onEventStart={handleBarEventStart}\n                key={task.id}\n                isSelected={!!selectedTask && task.id === selectedTask.id}\n                rtl={rtl}\n              />\n            )\n          );\n        })}\n      </g>\n    </g>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { GridProps, Grid } from \"../grid/grid\";\nimport { CalendarProps, Calendar } from \"../calendar/calendar\";\nimport { TaskGanttContentProps, TaskGanttContent } from \"./task-gantt-content\";\nimport styles from \"./gantt.module.css\";\n\nexport type TaskGanttProps = {\n  gridProps: GridProps;\n  calendarProps: CalendarProps;\n  barProps: TaskGanttContentProps;\n  ganttHeight: number;\n  scrollY: number;\n  scrollX: number;\n};\nexport const TaskGantt: React.FC<TaskGanttProps> = ({\n  gridProps,\n  calendarProps,\n  barProps,\n  ganttHeight,\n  scrollY,\n  scrollX,\n}) => {\n  const ganttSVGRef = useRef<SVGSVGElement>(null);\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\n  const verticalGanttContainerRef = useRef<HTMLDivElement>(null);\n  const newBarProps = { ...barProps, svg: ganttSVGRef };\n\n  useEffect(() => {\n    if (horizontalContainerRef.current) {\n      horizontalContainerRef.current.scrollTop = scrollY;\n    }\n  }, [scrollY]);\n\n  useEffect(() => {\n    if (verticalGanttContainerRef.current) {\n      verticalGanttContainerRef.current.scrollLeft = scrollX;\n    }\n  }, [scrollX]);\n\n  return (\n    <div\n      className={styles.ganttVerticalContainer}\n      ref={verticalGanttContainerRef}\n      dir=\"ltr\"\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width={gridProps.svgWidth}\n        height={calendarProps.headerHeight}\n        fontFamily={barProps.fontFamily}\n      >\n        <Calendar {...calendarProps} />\n      </svg>\n      <div\n        ref={horizontalContainerRef}\n        className={styles.horizontalContainer}\n        style={\n          ganttHeight\n            ? { height: ganttHeight, width: gridProps.svgWidth }\n            : { width: gridProps.svgWidth }\n        }\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width={gridProps.svgWidth}\n          height={barProps.rowHeight * barProps.tasks.length}\n          fontFamily={barProps.fontFamily}\n          ref={ganttSVGRef}\n        >\n          <Grid {...gridProps} />\n          <TaskGanttContent {...newBarProps} />\n        </svg>\n      </div>\n    </div>\n  );\n};\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\nimport styles from \"./horizontal-scroll.module.css\";\n\nexport const HorizontalScroll: React.FC<{\n  scroll: number;\n  svgWidth: number;\n  taskListWidth: number;\n  rtl: boolean;\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\n}> = ({ scroll, svgWidth, taskListWidth, rtl, onScroll }) => {\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollLeft = scroll;\n    }\n  }, [scroll]);\n\n  return (\n    <div\n      dir=\"ltr\"\n      style={{\n        margin: rtl\n          ? `0px ${taskListWidth}px 0px 0px`\n          : `0px 0px 0px ${taskListWidth}px`,\n      }}\n      className={styles.scrollWrapper}\n      onScroll={onScroll}\n      ref={scrollRef}\n    >\n      <div style={{ width: svgWidth }} className={styles.scroll} />\n    </div>\n  );\n};\n","import React, {\n  useState,\n  SyntheticEvent,\n  useRef,\n  useEffect,\n  useMemo,\n} from \"react\";\nimport { ViewMode, GanttProps, Task } from \"../../types/public-types\";\nimport { GridProps } from \"../grid/grid\";\nimport { ganttDateRange, seedDates } from \"../../helpers/date-helper\";\nimport { CalendarProps } from \"../calendar/calendar\";\nimport { TaskGanttContentProps } from \"./task-gantt-content\";\nimport { TaskListHeaderDefault } from \"../task-list/task-list-header\";\nimport { TaskListTableDefault } from \"../task-list/task-list-table\";\nimport { StandardTooltipContent, Tooltip } from \"../other/tooltip\";\nimport { VerticalScroll } from \"../other/vertical-scroll\";\nimport { TaskListProps, TaskList } from \"../task-list/task-list\";\nimport { TaskGantt } from \"./task-gantt\";\nimport { BarTask } from \"../../types/bar-task\";\nimport { convertToBarTasks } from \"../../helpers/bar-helper\";\nimport { GanttEvent } from \"../../types/gantt-task-actions\";\nimport { DateSetup } from \"../../types/date-setup\";\nimport { HorizontalScroll } from \"../other/horizontal-scroll\";\nimport { removeHiddenTasks, sortTasks } from \"../../helpers/other-helper\";\nimport styles from \"./gantt.module.css\";\n\nexport const Gantt: React.FunctionComponent<GanttProps> = ({\n  tasks,\n  headerHeight = 50,\n  columnWidth = 60,\n  listCellWidth = \"155px\",\n  rowHeight = 50,\n  ganttHeight = 0,\n  viewMode = ViewMode.Day,\n  ganttWidth = 0,\n  preStepsCount = 1,\n  locale = \"en-GB\",\n  barFill = 60,\n  barCornerRadius = 3,\n  barProgressColor = \"#a3a3ff\",\n  barProgressSelectedColor = \"#8282f5\",\n  barBackgroundColor = \"#b8c2cc\",\n  barBackgroundSelectedColor = \"#aeb8c2\",\n  projectProgressColor = \"#7db59a\",\n  projectProgressSelectedColor = \"#59a985\",\n  projectBackgroundColor = \"#fac465\",\n  projectBackgroundSelectedColor = \"#f7bb53\",\n  milestoneBackgroundColor = \"#f1c453\",\n  milestoneBackgroundSelectedColor = \"#f29e4c\",\n  rtl = false,\n  handleWidth = 8,\n  timeStep = 300000,\n  arrowColor = \"grey\",\n  fontFamily = \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\",\n  fontSize = \"14px\",\n  arrowIndent = 20,\n  todayColor = \"rgba(252, 248, 227, 0.5)\",\n  viewDate,\n  TooltipContent = StandardTooltipContent,\n  TaskListHeader = TaskListHeaderDefault,\n  TaskListTable = TaskListTableDefault,\n  onDateChange,\n  onProgressChange,\n  onDoubleClick,\n  onClick,\n  onDelete,\n  onSelect,\n  onExpanderClick,\n}) => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const taskListRef = useRef<HTMLDivElement>(null);\n  const [dateSetup, setDateSetup] = useState<DateSetup>(() => {\n    const [startDate, endDate] = ganttDateRange(tasks, viewMode, preStepsCount);\n    return { viewMode, dates: seedDates(startDate, endDate, viewMode) };\n  });\n  const [currentViewDate, setCurrentViewDate] = useState<Date | undefined>(\n    undefined\n  );\n\n  const [taskListWidth, setTaskListWidth] = useState(0);\n  const [svgContainerWidth, setSvgContainerWidth] = useState(0);\n  const [svgContainerHeight, setSvgContainerHeight] = useState(ganttHeight);\n  const [barTasks, setBarTasks] = useState<BarTask[]>([]);\n  const [ganttEvent, setGanttEvent] = useState<GanttEvent>({\n    action: \"\",\n  });\n  const taskHeight = useMemo(\n    () => (rowHeight * barFill) / 100,\n    [rowHeight, barFill]\n  );\n\n  const [selectedTask, setSelectedTask] = useState<BarTask>();\n  const [failedTask, setFailedTask] = useState<BarTask | null>(null);\n\n  const svgWidth = Math.max(dateSetup.dates.length * columnWidth, ganttWidth);\n  const ganttFullHeight = barTasks.length * rowHeight;\n\n  const [scrollY, setScrollY] = useState(0);\n  const [scrollX, setScrollX] = useState(dateSetup.dates.length * columnWidth);\n  const [ignoreScrollEvent, setIgnoreScrollEvent] = useState(false);\n\n  // task change events\n  useEffect(() => {\n    let filteredTasks: Task[];\n    if (onExpanderClick) {\n      filteredTasks = removeHiddenTasks(tasks);\n    } else {\n      filteredTasks = tasks;\n    }\n    filteredTasks = filteredTasks.sort(sortTasks);\n    const [startDate, endDate] = ganttDateRange(\n      filteredTasks,\n      viewMode,\n      preStepsCount\n    );\n    let newDates = seedDates(startDate, endDate, viewMode);\n    if (rtl) {\n      newDates = newDates.reverse();\n      if (scrollX === -1) {\n        setScrollX(newDates.length * columnWidth);\n      }\n    }\n    setDateSetup({ dates: newDates, viewMode });\n    setBarTasks(\n      convertToBarTasks(\n        filteredTasks,\n        newDates,\n        columnWidth,\n        rowHeight,\n        taskHeight,\n        barCornerRadius,\n        handleWidth,\n        rtl,\n        barProgressColor,\n        barProgressSelectedColor,\n        barBackgroundColor,\n        barBackgroundSelectedColor,\n        projectProgressColor,\n        projectProgressSelectedColor,\n        projectBackgroundColor,\n        projectBackgroundSelectedColor,\n        milestoneBackgroundColor,\n        milestoneBackgroundSelectedColor\n      )\n    );\n  }, [\n    tasks,\n    viewMode,\n    preStepsCount,\n    rowHeight,\n    barCornerRadius,\n    columnWidth,\n    taskHeight,\n    handleWidth,\n    barProgressColor,\n    barProgressSelectedColor,\n    barBackgroundColor,\n    barBackgroundSelectedColor,\n    projectProgressColor,\n    projectProgressSelectedColor,\n    projectBackgroundColor,\n    projectBackgroundSelectedColor,\n    milestoneBackgroundColor,\n    milestoneBackgroundSelectedColor,\n    rtl,\n    scrollX,\n    onExpanderClick,\n  ]);\n\n  useEffect(() => {\n    if (\n      viewMode === dateSetup.viewMode &&\n      ((viewDate && !currentViewDate) ||\n        (viewDate && currentViewDate?.valueOf() !== viewDate.valueOf()))\n    ) {\n      const dates = dateSetup.dates;\n      const index = dates.findIndex(\n        (d, i) =>\n          viewDate.valueOf() >= d.valueOf() &&\n          i + 1 !== dates.length &&\n          viewDate.valueOf() < dates[i + 1].valueOf()\n      );\n      if (index === -1) {\n        return;\n      }\n      setCurrentViewDate(viewDate);\n      setScrollX(columnWidth * index);\n    }\n  }, [\n    viewDate,\n    columnWidth,\n    dateSetup.dates,\n    dateSetup.viewMode,\n    viewMode,\n    currentViewDate,\n    setCurrentViewDate,\n  ]);\n\n  useEffect(() => {\n    const { changedTask, action } = ganttEvent;\n    if (changedTask) {\n      if (action === \"delete\") {\n        setGanttEvent({ action: \"\" });\n        setBarTasks(barTasks.filter(t => t.id !== changedTask.id));\n      } else if (\n        action === \"move\" ||\n        action === \"end\" ||\n        action === \"start\" ||\n        action === \"progress\"\n      ) {\n        const prevStateTask = barTasks.find(t => t.id === changedTask.id);\n        if (\n          prevStateTask &&\n          (prevStateTask.start.getTime() !== changedTask.start.getTime() ||\n            prevStateTask.end.getTime() !== changedTask.end.getTime() ||\n            prevStateTask.progress !== changedTask.progress)\n        ) {\n          // actions for change\n          const newTaskList = barTasks.map(t =>\n            t.id === changedTask.id ? changedTask : t\n          );\n          setBarTasks(newTaskList);\n        }\n      }\n    }\n  }, [ganttEvent, barTasks]);\n\n  useEffect(() => {\n    if (failedTask) {\n      setBarTasks(barTasks.map(t => (t.id !== failedTask.id ? t : failedTask)));\n      setFailedTask(null);\n    }\n  }, [failedTask, barTasks]);\n\n  useEffect(() => {\n    if (!listCellWidth) {\n      setTaskListWidth(0);\n    }\n    if (taskListRef.current) {\n      setTaskListWidth(taskListRef.current.offsetWidth);\n    }\n  }, [taskListRef, listCellWidth]);\n\n  useEffect(() => {\n    if (wrapperRef.current) {\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\n    }\n  }, [wrapperRef, taskListWidth]);\n\n  useEffect(() => {\n    if (ganttHeight) {\n      setSvgContainerHeight(ganttHeight + headerHeight);\n    } else {\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\n    }\n  }, [ganttHeight, tasks, headerHeight, rowHeight]);\n\n  // scroll events\n  useEffect(() => {\n    const handleWheel = (event: WheelEvent) => {\n      if (event.shiftKey || event.deltaX) {\n        const scrollMove = event.deltaX ? event.deltaX : event.deltaY;\n        let newScrollX = scrollX + scrollMove;\n        if (newScrollX < 0) {\n          newScrollX = 0;\n        } else if (newScrollX > svgWidth) {\n          newScrollX = svgWidth;\n        }\n        setScrollX(newScrollX);\n        event.preventDefault();\n      } else if (ganttHeight) {\n        let newScrollY = scrollY + event.deltaY;\n        if (newScrollY < 0) {\n          newScrollY = 0;\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\n          newScrollY = ganttFullHeight - ganttHeight;\n        }\n        if (newScrollY !== scrollY) {\n          setScrollY(newScrollY);\n          event.preventDefault();\n        }\n      }\n\n      setIgnoreScrollEvent(true);\n    };\n\n    // subscribe if scroll is necessary\n    wrapperRef.current?.addEventListener(\"wheel\", handleWheel, {\n      passive: false,\n    });\n    return () => {\n      wrapperRef.current?.removeEventListener(\"wheel\", handleWheel);\n    };\n  }, [\n    wrapperRef,\n    scrollY,\n    scrollX,\n    ganttHeight,\n    svgWidth,\n    rtl,\n    ganttFullHeight,\n  ]);\n\n  const handleScrollY = (event: SyntheticEvent<HTMLDivElement>) => {\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\n      setScrollY(event.currentTarget.scrollTop);\n      setIgnoreScrollEvent(true);\n    } else {\n      setIgnoreScrollEvent(false);\n    }\n  };\n\n  const handleScrollX = (event: SyntheticEvent<HTMLDivElement>) => {\n    if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\n      setScrollX(event.currentTarget.scrollLeft);\n      setIgnoreScrollEvent(true);\n    } else {\n      setIgnoreScrollEvent(false);\n    }\n  };\n\n  /**\n   * Handles arrow keys events and transform it to new scroll\n   */\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\n    event.preventDefault();\n    let newScrollY = scrollY;\n    let newScrollX = scrollX;\n    let isX = true;\n    switch (event.key) {\n      case \"Down\": // IE/Edge specific value\n      case \"ArrowDown\":\n        newScrollY += rowHeight;\n        isX = false;\n        break;\n      case \"Up\": // IE/Edge specific value\n      case \"ArrowUp\":\n        newScrollY -= rowHeight;\n        isX = false;\n        break;\n      case \"Left\":\n      case \"ArrowLeft\":\n        newScrollX -= columnWidth;\n        break;\n      case \"Right\": // IE/Edge specific value\n      case \"ArrowRight\":\n        newScrollX += columnWidth;\n        break;\n    }\n    if (isX) {\n      if (newScrollX < 0) {\n        newScrollX = 0;\n      } else if (newScrollX > svgWidth) {\n        newScrollX = svgWidth;\n      }\n      setScrollX(newScrollX);\n    } else {\n      if (newScrollY < 0) {\n        newScrollY = 0;\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\n        newScrollY = ganttFullHeight - ganttHeight;\n      }\n      setScrollY(newScrollY);\n    }\n    setIgnoreScrollEvent(true);\n  };\n\n  /**\n   * Task select event\n   */\n  const handleSelectedTask = (taskId: string) => {\n    const newSelectedTask = barTasks.find(t => t.id === taskId);\n    const oldSelectedTask = barTasks.find(\n      t => !!selectedTask && t.id === selectedTask.id\n    );\n    if (onSelect) {\n      if (oldSelectedTask) {\n        onSelect(oldSelectedTask, false);\n      }\n      if (newSelectedTask) {\n        onSelect(newSelectedTask, true);\n      }\n    }\n    setSelectedTask(newSelectedTask);\n  };\n  const handleExpanderClick = (task: Task) => {\n    if (onExpanderClick && task.hideChildren !== undefined) {\n      onExpanderClick({ ...task, hideChildren: !task.hideChildren });\n    }\n  };\n  const gridProps: GridProps = {\n    columnWidth,\n    svgWidth,\n    tasks: tasks,\n    rowHeight,\n    dates: dateSetup.dates,\n    todayColor,\n    rtl,\n  };\n  const calendarProps: CalendarProps = {\n    dateSetup,\n    locale,\n    viewMode,\n    headerHeight,\n    svgWidth,\n    columnWidth,\n    fontFamily,\n    fontSize,\n    rtl,\n  };\n  const barProps: TaskGanttContentProps = {\n    tasks: barTasks,\n    dates: dateSetup.dates,\n    ganttEvent,\n    selectedTask,\n    rowHeight,\n    taskHeight,\n    columnWidth,\n    arrowColor,\n    timeStep,\n    fontFamily,\n    fontSize,\n    arrowIndent,\n    svgWidth,\n    rtl,\n    setGanttEvent,\n    setFailedTask,\n    setSelectedTask: handleSelectedTask,\n    onDateChange,\n    onProgressChange,\n    onDoubleClick,\n    onClick,\n    onDelete,\n  };\n\n  const tableProps: TaskListProps = {\n    rowHeight,\n    rowWidth: listCellWidth,\n    fontFamily,\n    fontSize,\n    tasks: barTasks,\n    locale,\n    headerHeight,\n    scrollY,\n    ganttHeight,\n    horizontalContainerClass: styles.horizontalContainer,\n    selectedTask,\n    taskListRef,\n    setSelectedTask: handleSelectedTask,\n    onExpanderClick: handleExpanderClick,\n    TaskListHeader,\n    TaskListTable,\n  };\n  return (\n    <div>\n      <div\n        className={styles.wrapper}\n        onKeyDown={handleKeyDown}\n        tabIndex={0}\n        ref={wrapperRef}\n      >\n        {listCellWidth && <TaskList {...tableProps} />}\n        <TaskGantt\n          gridProps={gridProps}\n          calendarProps={calendarProps}\n          barProps={barProps}\n          ganttHeight={ganttHeight}\n          scrollY={scrollY}\n          scrollX={scrollX}\n        />\n        {ganttEvent.changedTask && (\n          <Tooltip\n            arrowIndent={arrowIndent}\n            rowHeight={rowHeight}\n            svgContainerHeight={svgContainerHeight}\n            svgContainerWidth={svgContainerWidth}\n            fontFamily={fontFamily}\n            fontSize={fontSize}\n            scrollX={scrollX}\n            scrollY={scrollY}\n            task={ganttEvent.changedTask}\n            headerHeight={headerHeight}\n            taskListWidth={taskListWidth}\n            TooltipContent={TooltipContent}\n            rtl={rtl}\n            svgWidth={svgWidth}\n          />\n        )}\n        <VerticalScroll\n          ganttFullHeight={ganttFullHeight}\n          ganttHeight={ganttHeight}\n          headerHeight={headerHeight}\n          scroll={scrollY}\n          onScroll={handleScrollY}\n          rtl={rtl}\n        />\n      </div>\n      <HorizontalScroll\n        svgWidth={svgWidth}\n        taskListWidth={taskListWidth}\n        scroll={scrollX}\n        rtl={rtl}\n        onScroll={handleScrollX}\n      />\n    </div>\n  );\n};\n"],"names":["ViewMode","intlDTCache","getCachedDateTimeFormat","locString","opts","key","JSON","stringify","dtf","Intl","DateTimeFormat","addToDate","date","quantity","scale","newDate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","startOfDate","scores","shouldReset","_scale","maxScore","indexOf","ganttDateRange","tasks","viewMode","preStepsCount","postStepsCount","newStartDate","start","newEndDate","task","end","Year","QuarterYear","Month","Week","getMonday","Day","QuarterDay","HalfDay","Hour","seedDates","startDate","endDate","currentDate","dates","push","getLocaleMonth","locale","bottomValue","month","format","replace","toLocaleUpperCase","getLocalDayOfWeek","weekday","day","getDay","diff","setDate","getWeekNumberISO8601","tmpDate","valueOf","dayNumber","firstThursday","setMonth","weekNumber","Math","ceil","toString","length","getDaysInMonth","year","TaskListHeaderDefault","headerHeight","fontFamily","fontSize","rowWidth","React","className","styles","ganttTable","style","borderLeft","ganttTable_Header","height","ganttTable_HeaderItem","minWidth","localeDateStringCache","toLocaleDateStringFactory","dateTimeOptions","lds","toLocaleDateString","TaskListTableDefault","rowHeight","onExpanderClick","useMemo","taskListWrapper","map","t","expanderSymbol","hideChildren","taskListTableRow","id","taskListCell","maxWidth","paddingLeft","title","name","taskListNameWrapper","taskListExpander","taskListEmptyExpander","onClick","fontWeight","type","Tooltip","rtl","svgContainerHeight","svgContainerWidth","scrollX","scrollY","arrowIndent","taskListWidth","TooltipContent","tooltipRef","useRef","relatedY","setRelatedY","useState","relatedX","setRelatedX","useEffect","current","tooltipHeight","offsetHeight","tooltipWidth","offsetWidth","newRelatedY","index","newRelatedX","x1","x2","tooltipLeftmostPoint","fullChartWidth","tooltipLowerPoint","ref","tooltipDetailsContainer","tooltipDetailsContainerHidden","left","top","StandardTooltipContent","dayjs","formattedStartDate","formattedEndDate","durationInDays","durationInMonths","durationInYears","duration","tooltipDefaultContainer","getTime","tooltipDefaultContainerParagraph","progress","VerticalScroll","scroll","ganttHeight","ganttFullHeight","onScroll","scrollRef","scrollTop","marginTop","marginLeft","width","TaskList","selectedTask","setSelectedTask","taskListRef","horizontalContainerClass","TaskListHeader","TaskListTable","horizontalContainerRef","headerProps","selectedTaskId","tableProps","GridBody","svgWidth","columnWidth","todayColor","y","gridRows","rowLines","x","y1","y2","gridRowLine","gridRow","now","tickX","ticks","today","i","gridTick","fill","Grid","props","TopPartOfCalendar","value","x1Line","y1Line","y2Line","xText","yText","calendarTopTick","calendarTopText","Calendar","dateSetup","getCalendarValuesForYear","topValues","bottomValues","topDefaultHeight","calendarBottomText","topValue","getCalendarValuesForQuarterYear","quarter","floor","abs","getCalendarValuesForMonth","bottomYearValue","toUpperCase","getCalendarValuesForWeek","weeksCount","getCalendarValuesForDay","getCalendarValuesForPartOfDay","hour","getCalendarValuesForHour","displayDate","topPosition","calendarHeader","Arrow","taskFrom","taskTo","taskHeight","path","trianglePoints","drownPathAndTriangleRTL","drownPathAndTriangle","strokeWidth","d","points","indexCompare","taskToEndPosition","taskFromEndPosition","taskFromHorizontalOffsetValue","taskToHorizontalOffsetValue","convertToBarTasks","barCornerRadius","handleWidth","barProgressColor","barProgressSelectedColor","barBackgroundColor","barBackgroundSelectedColor","projectProgressColor","projectProgressSelectedColor","projectBackgroundColor","projectBackgroundSelectedColor","milestoneBackgroundColor","milestoneBackgroundSelectedColor","barTasks","convertToBarTask","dependencies","j","dependence","findIndex","barChildren","barTask","convertToMilestone","convertToBar","taskXCoordinateRTL","taskXCoordinate","typeInternal","progressWidth","progressX","progressWithByParams","taskYCoordinate","undefined","backgroundColor","backgroundSelectedColor","progressColor","progressSelectedColor","rotatedHeight","xDate","remainderMillis","percentOfInterval","taskX1","taskX2","progressByX","barWidth","progressPercent","round","progressByXRTL","getProgressPoint","taskY","point","join","startByX","xStep","steps","additionalXValue","newX","endByX","moveByX","newX1","newX2","dateByX","taskX","taskDate","timeStep","getTimezoneOffset","handleTaskBySVGMouseEvent","svgX","action","initEventX1Delta","result","handleTaskBySVGMouseEventForMilestone","handleTaskBySVGMouseEventForBar","changedTask","isChanged","newMoveX1","newMoveX2","isKeyboardEvent","event","removeHiddenTasks","groupedTasks","filter","groupedTask","children","getChildren","taskList","project","taskChildren","forEach","concat","sortTasks","taskA","taskB","orderA","displayOrder","Number","MAX_VALUE","orderB","BarDisplay","isSelected","onMouseDown","getProcessColor","getBarColor","ry","rx","barBackground","BarDateHandle","barHandle","BarProgressHandle","progressPoint","Bar","isProgressChangeable","isDateChangeable","onEventStart","handleHeight","barWrapper","tabIndex","e","BarSmall","Milestone","transform","milestoneWrapper","milestoneBackground","Project","barColor","processColor","projectWith","projectLeftTriangle","projectRightTriangle","projectWrapper","projectBackground","projectTop","TaskItem","isDelete","textRef","taskItem","setTaskItem","isTextInside","setIsTextInside","getBBox","getX","hasChild","onKeyDown","stopPropagation","onMouseEnter","onMouseLeave","onDoubleClick","onFocus","barLabel","barLabelOutside","TaskGanttContent","ganttEvent","svg","arrowColor","setGanttEvent","setFailedTask","onDateChange","onProgressChange","onDelete","createSVGPoint","setXStep","setInitEventX1Delta","isMoving","setIsMoving","dateDelta","newXStep","handleMouseMove","preventDefault","clientX","cursor","matrixTransform","getScreenCTM","inverse","handleMouseUp","originalSelectedTask","newChangedTask","isNotLikeOriginal","removeEventListener","operationSuccess","error","addEventListener","handleBarEventStart","console","stroke","child","isDisabled","TaskGantt","gridProps","calendarProps","barProps","ganttSVGRef","verticalGanttContainerRef","newBarProps","scrollLeft","ganttVerticalContainer","dir","xmlns","horizontalContainer","HorizontalScroll","margin","scrollWrapper","Gantt","listCellWidth","ganttWidth","barFill","viewDate","onSelect","wrapperRef","setDateSetup","currentViewDate","setCurrentViewDate","setTaskListWidth","setSvgContainerWidth","setSvgContainerHeight","setBarTasks","failedTask","max","setScrollY","setScrollX","ignoreScrollEvent","setIgnoreScrollEvent","filteredTasks","sort","newDates","reverse","prevStateTask","find","newTaskList","handleWheel","shiftKey","deltaX","scrollMove","deltaY","newScrollX","newScrollY","passive","handleScrollY","currentTarget","handleScrollX","handleKeyDown","isX","handleSelectedTask","taskId","newSelectedTask","oldSelectedTask","handleExpanderClick","wrapper"],"mappings":"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"}